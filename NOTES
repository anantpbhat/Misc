UserGuide for UNIX

Back To Table of Contents

Autosys support
Telephone: 1-800-833-7528

NY Site ID: 131366 (Old ID:6086158) PRN Site ID: 104987

ftp-server: ftp.platinum.com ,account name autosys, changes
monthly, or login as anonymous & go to different location
#
####
#
Printing problems (BSD style):-
"lpd" is the printing daemon running. Check and ensure multiple lpd proceses
are running for multiple printers defined on the server.

lpr -P printername filename    [to print a file]

lpq -P printername      [to check a printers print queue]

lpc disable|enable|down|start|restart|clean printername
lpc status printername  [should be enabled and queing]

Variables to set default Printer for a user.
- add to .envfile in users home dir.
PRINTER="printer-name"          [BSD style]
LPDEST=printer-name"            [System V style]
#
####
#
Distribution Notes :
sol-build.fi.csfb.com   Solaris Build server and OS distribution server
distmaster.fi.csfb.com   passwd, shadow, etc distribution master
ny_distsvr1.fi.csfb.com SunOS distribution server.
build_srv               SunOS build server

/etc/csg_release        [file which has the info about latest CSG release]
/usr/local/bin/csversion        [Command gives u latest release info]
/var/spool/distribute   [Dir. where all the distribution logs are stored]
touch /.DoNotDistribute locally in server to prevent it from getting disted.
touch /.ignore_csg to override CSG rel check on host being disted or use "-e ignore_csg=1".
/usr/local/etc/csfp_distribute -F pns00i-0104 -P Global_Sol10-CSS_Package -D REGION=am -D DIST_HOSTS_COMPLETE=1 -L None -o noverify,remove,nolockwait -m <host>
Solaris10 CSS3 = AM_Sol10-CSS3_Package
Solaris10 CSS2 = Global_Sol10-CSS_Package
csfp_distribute -o noverify,remove -P <Linux-pkg-name> -m host -e ignore_csg=1 -e ignore_dist=1 -e ignore_arch=1
/usr/local/host/etc/interfaces  [ To setup Interface speed ]

./ngedit -r "OS Upgrade RFC 391135" -f "pns15a-4403" am_sol510-css_0201_pns00i-0104_prod_hosts_siteonly +h pns15a-4403
./ngedit -vv am_sol510-css_0201_pns00i-0104_prod_hosts_siteonly
#
####
#
Cisco 2600 TS:
to clear terminal line already busy or connected.
login to TS
enable          [ Superuser mode ]
clear line tty 33       [ 33=line 1, 34=line 2....]


#
####
#
Xwindows commands:
For Solaris the X-windows path is /usr/openwin/bin and /usr/dt/bin (CDE)
For SUNOS boxes the X-windows path is /usr/X11/bin

/usr/openwin/bin/xterm -display $DISPLAY -title "$HOSTNAME" -n $HOSTNAME -bg black -fg cyan -cr blue -sl 1000 -sk -aw -e rsh $HOSTNAME

#
####
#
majordomo :     listman
#
### Sending mails with attachment in Unix ###
#
uuencode <Filename> abhat | mailx -s "ABC" anant.bhat@csfb.com
#
### Send email with return address or change the "From" address ###
mailx -v -s "Test message to check MAILX" -r "list.ib-it-ptg-opt-sup@credit-suisse.com" anant.bhat@credit-suisse.com < /dev/null                [ From Solaris ]

mail -v -s "Test message to check MAILX" anant.bhat@credit-suisse.com -- -f "list.ib-it-ptg-opt-sup@credit-suisse.com" anant.bhat@credit-suisse.com < /dev/null      [ From Linux ]
#
### Tooltalk Channel error for Workshop ###
/usr/openwin/bin/ttsession -c ./workshop -d nys01c-053:0.0 &
#
### PGP Notes ###
#
1.  Generate a public/private key pair:
# /app/PGP/pgp -kg  # this will create a .pgp directory under the homedir of the
account and will have 2 primary files, pubring.pkr and secring.pkr
(somtimes named pubring.pgp and secring.pgp, depends on the version)
2.  Once you have a keypair, extract the pulic key from the pubring for
the userid that you want them to use to send you encrypted data.
# /app/PGP/pgp -kxa userid keyfile keyring  (The userid here is your userid.)
ex.
# /app/PGP/pgp -kxa abhat pubkey pubring.pkr (This File "pubkey" is your Public Key.)

You can view the User ID's that you have for each public key stored in your pubring.pkr,
# /app/PGP/pgp -kv pubring.pkr

Note: private key is for you to use to decrypt the file, while the public
key is what you give to the sender who would send you encrypted data (File, Mail).
3.  Then, you can email or FTP your Public Key to all users, so they can
send encrypted message to you.
4.  They in turn will send you their public key for you to use to encrypt
the data that you are going to send them, once you have their public key,
add it to your pubring.pkr,
# /app/PGP/pgp -ka keyfile pubring.pkr (Here you are adding others Public Key to your Key list)
5.  To encrypt,
# /app/PGP/pgp -ea textfile their_userid (produces testfile.pgp)
6.  To decrypt,
# /app/PGP/pgp -p textfile.pgp
7.  To get more pgp command options,
# /app/PGP/pgp -k
# /app/PGP/pgp -h

GPG/gpg
gpg --gen-key   [ Creates keypair for userid in ~home/.gpg ]
gpg --export --armor    [ Shows you the Public key that can be emailed to other party ]

##### Changing System parameters on the FLY #####
echo 'tod_validate_enable/D' | adb -k         ## Display current value
physmem 1f107
tod_validate_enable:
tod_validate_enable:            1

echo 'tod_validate_enable/W 0t0' | adb -kw    ## Assign new value
physmem 1f107
tod_validate_enable:            0x1             =       0x0

##### Ecache Setting for E420R #####
set ecache_scrub_enable=1
set ecache_scan_rate=1000
set ecache_calls_a_sec=100

### File Descriptor params ###
set rlim_fd_cur=<value>         [Sets soft limit]
set rlim_fd_max=<value>         [Sets hard limit]

##### PS HANG ######
ps -ef          [ When ps cmd hangs on the solaris, pls do the next to identify the bad PID ]
truss -fale -o /tmp/truss.out -rall -vall -wall ps -ef

ps -fLu <user> [ To get every Thread info for a process in Solaris ]
kill -3 <pid>   [ Thread Dump ]
##### X25 troubleshooting #####
cd /usr/sunlink/x25
./vcstat -L -i3

###EGENERA FTP ###
user csfb-ny@files.egenera.com

###EGENERA Ticket procedure ###
pointofview.egenera.com
--> Submit New Ticket

===> To identify Frame name from the p-blade -
look for "egenera.frame.display.name" in /proc/egenera/Egenera_Config/egenera.management.properties
      file on any p-blade.
===> Format modules.conf -
cat /etc/modules.conf | awk '/"scsi/,/^$/ {print $3}' | tr ';' '\n' | grep -v adapter

===> I/O monitoring on Egenera/egenera C-blades -
pathstat -t -i $INTERVAL -c $COUNT -T $BLADES
pathtop -i $INTERVAL -c $COUNT -b

### Linux Issues ###
==> Netgroup/netgroup login issues
In order to allow netgroup users login into Linux host - You need to add nis entry in nsswitch.conf
file in front of Netgroup tab.

==>
Shutdown nscd: /sbin/service nscd stop  # Due to login issues
Nis Lib issues for login:
lrwxrwxrwx    1 root     root           22 Aug 23 16:36 libnss_nis.so.2 ->
libnss_nis-2.2.4.so.bk
lrwxrwxrwx    1 root     bin            22 Apr 22  2003
libnss_compat.so.2 -> libnss_compat- 2.2.4.so.bk
needs to be:
lrwxrwxrwx    1 root     root           22 Aug 23 16:36 libnss_nis.so.2 ->
libnss_nis-2.2.4.so
lrwxrwxrwx    1 root     bin            22 Apr 22  2003
libnss_compat.so.2 -> libnss_compat- 2.2.4.so
==>     FIFO
Check to see if /opt/panmgr/tmp/sysmsg.fifo is a regular file or a named
pipe/fifo
"prwx------" if it is correctly created.
If the file is a regular file, then execute:

rm -f /opt/panmgr/tmp/sysmsg.fifo
mkfifo -m 600 /opt/panmgr/tmp/sysmsg.fifo
service panagent restart

This will resolve the issue.

Additionally, if the /etc/syslog.conf has an entry to write to
/opt/panmgr/tmp/sysmsg.fifo, they should verify that it writes to this file
as a named pipe, not a regular file, ie, with the pipe ("|") character
before the filename. If the entry is like so:

kern.error /opt/panmgr/tmp/sysmsg.fifo

... they should change it to:

kern.error |/opt/panmgr/tmp/sysmsg.fifo

===> Creating/Converting from ext2 to ext3 Filesystem :-
mkfs -t ext2 /dev/sdc1
e2fsck /dev/sdc1
tune2fs -j /dev/sdc1    [ Adds journaling to ext2 Filesystem ]
unmount /export         [ resides on device sda5 ]
tune2fs -O extents,uninit_bg,dir_index /dev/sda5        [ Convert EXT3 to EXT4 ]
e2fsck /dev/sda5
fsck -pf /dev/sda5
Update entry in fstab to ext4 for /export

EXT3 or EXT4 filesystems use -K option on Thin provisioned Storage.
mkfs.ext4 / mkfs.ext3 ==> should use -K option for thinly provisioned storage.

===>    Resizing/Growing ext3 Filesystem :-
Grow the volume under Veritas first.
umount /mntpt
e2fsck -f <Blockdevice>
resize2fs -p <Blockdevice>
mount /mntpt

mount -o remount,rw /   [ For ro root FS ]
===> /sbin/dumpe2fs /dev/hda2 | grep 'Block size'       [ Find Blocksize for EXT2 FS ]

===>    Disabling HyperThreading on Linux
cd /boot/grub
vi grub.conf and add noht to kernel line as in example below.
/sbin/grub-install /dev/sda (run it twice, to make sure that it take it)
reboot
Eg:-    kernel /vmlinuz-2.4.9-e.27enterprise ro root=/dev/sda2 noht ramdisk_size=32768 ramdisk_size=49152 maxcpus=2 mem=4096M

==> To boot without any passwd pass "init=/bin/bash" argument to the kernel line at boot prompt.

===> Displaying underlying Hardware details in Linux/linux/LINUX use command dmidecode
dmidecode | grep CPU {displays Number of CPU's}
systool -c fc_host -v | grep -i port_name
sfdisk -d /dev/sdxx | sfdisk /dev/sdxy  [ Copies partition table from sdxx to sdxy ]
partprobe       [ Scan in-memory and on-disk partitions to check inconsistencies ]
partx -u        [ To update in-memory Kernel partition table ]

===> Multipath / multipath
Always use only /dev/mapper/mpathX      [ These devices are created by udev and are persistent across reboots ]
To restart multipath -
multipath -F    [ Flush all multipath dev paths, system should be in maintenance mode ]
multipath -d    [ Dry-run to check if conf file is correct ]
multipathd -r
/sbin/service multipathd reload
multipath -l1

"find_multipaths yes" option in RHEL6

Steps to re-scan a resized LUN on 3PAR / SAN. - useful for RHEV Storage domain
blockdev --rereadpt /dev/sdxx   [Re-read SCSI device partition table]
blockdev --rereadpt /dev/sdxx   [Should be done for every path for that LUN]
OR scsi-rescan -a / -s
scsi-rescan --forcerescan       [To remove LUN]
scsi-rescan --resize
scsi-rescan --update
multipath -r
multipath -l1
pvresize /dev/mapper/mpathname(uuid)
pvscan -v
vgscan -v
dmsetup remove <lv-name>
pvremove <pv-name>      [Use -ff if doesn't work]
dmsetup clear <devname>
dmsetup remove <devname>
dmsetup -c info | grep "<dev-name>"     [Useful to find devices using this dev]

# echo offline >/sys/block/sdg/device/state     [Take a device path offline]
# echo running >/sys/block/sdg/device/state     [Re-enable the device path]

multipathd -k
fail path sdg                   [Take a device path offline]
reinstate path sdg              [Re-enable the device path]

===> To Check Network Interface speed & mode in linux/Linux/LINUX
ethtool eth0
mii-tool eth0
tcpdump -i eth0 host pnyexam1 -w /tmp/eth0.out1
tcpdump -r /tmp/eth0.out1       [ To Read ]
In ifcfg-ethX file "HWADDR=" has to be specified on RHEL servers, or else the ethX interface will show as _tmpxxxxx in ifconfig output

===> To Add/Remove scsi disks online in Linux/LINUX
echo "scsi remove-single-device 0 0 1 0" >> /proc/scsi/scsi     [ Remove scsi0 ch0 ID1 Lun0 - auto rescans ]
echo "scsi add-single-device 0 0 1 0" >> /proc/scsi/scsi        [ Add scsi0 ch0 ID1 Lun0 - auto rescans ]
echo "scsi scan-new-devices" > /proc/scsi/scsi                  [ To SCAN new devices ]
echo "- - -" > /sys/class/scsi_host/host0/scan                  [ To SCAN new devices on SLES ]
echo "- - -" > /sys/class/scsi_host/host1/scan                  [ To SCAN new devices on SLES ]

===> Change Device numbering in LINUX/Linux/linux
cd /etc/udev/rules.d/
30-net_persistent_names.rules   [ Change ethx numbers to point to appropriate MAC ]
20-names.rules: KERNEL=="vd*", SUBSYSTEM=="block", ATTR{serial}=="xxxxx-xxx-xxxx", NAME="vdX"
udevadm info -a -p $(udevadm info -q path -n /dev/vdX)
udevadm test /block/vdX
### SuSE/suse Linux Tips ###
===> Nodename of a host is stored in /etc/HOSTNAME file.
===> Imp Hardware cmds - lspci, modprobe, rmmod, getcfg, hwstatus/up/down,
rc<nscd/network/..> start/stop/restart
lspci | egrep -i "broadcom" <To get MAC of interfaces and/or PCI BUS addr
of any hardware>
MODULE='bcm5700' should be the 1st line in
/etc/sysconfig/hardware/hwcfg-bus-pci... file.
Module might not load properly in this line is not 1st in the file.
MODULE_OPTIONS='auto_speed=0 line_speed=100 full_duplex=1' <To set an I/F
to 100FDX>

Enable X-Windows on Linux/LINUX
Make sure these 2 RPM's are installed, its needed for X-windows to work
libXtst-1.0.1-3.1.i386.rpm
libXi-1.0.1-4.el5_4.i386.rpm

### passwd/Passwd/PASSWD unlock in RHEL ###
passwd -u <username>
also check /etc/pam.d/system-auth file, reduce the lockout time in there.
pam_tally2 -u infadmin          [ Check Login failures ]
pam_tally2 -u infadmin -r       [ reset login failures ]

### BASP/basp NIC teaming ###
rpm - qa | grep -i basp
basp conf files can be found under /etc/basp/ DIR.
baspcfg show <To check basp inetrface status>

#### printcap ####
Make printers.conf from printcap file on NFS.
cd /export/vol/bin
./conv_lpd -c printers ./printcap > ./printers.conf

##### VXVM Commands #####
vxdctl init     [ To initialise VxVM for 1st time after Upgrade ]
vxstat -g <Diskgroup> -f ff <vol>       # Shows all failed I/O on that volume.
vxdisk -o alldgs list
vxmend fix stale P1/P2  (when both Plexes in a volume are in Recover/disabled mode, volume is not startable)
vxmend fix clean P1/P2
vxrecover -s V
vxmend fix clean <plex> (when one plex is showing IOFAIL/Detached in error)
vxmend fix active <plex>
vxplex (-f) att <vol> <plex>
vxvol (-f) start
vxmend -p clear all P1  (If the plex is locked by another utility)
vxmend -v clear all V   (If the plex is locked by another utility)
/etc/vx/diag.d/vxprivutil scan /dev/sda         [ To check if the disk belonged to Veritas before ]
Procedure to downgrade DiskGroup version -
0. Save the output of
#vxdisk list
command to use later.
1. Dump disk group configuration to a file
# vxprint -Qqmhspv -g migdg > migdg.conf
To verify the dump file
# vxprint -D - -ht < migdg.conf
2. Unmount file systems and destroy the disk group
# vxdg destroy migdg
3. Recreate migdg with same disk names as before, give the version you prefer with -T
# vxdg -T 110 init migdg disk1=c#t#d# disk2=c#t#d# ...
4. Recreate the volumes by using previously saved configuration file
# vxmake -g migdg -d migdg.conf
5. Reactivate the volumes.
# vxvol -g migdg init active volume-name
6. Mount file systems.

To save imp. volume meta info -
vxprint -mrg <DGNAME> <Volname>

VxVM without root encapsulation / mini rootdg
3. Finally, make use of the unused slice 7 on disks c0t0d0 and c0t1d0 to create a rootdg diskgroup on those slices.
4.       # vxconfigd -m disable
5.       # vxdctl init
6.       # vxdg init rootdg
7.       # vxdctl add disk c0t0d0s7 type=simple
8.       # vxdisk -f init c0t0d0s7 type=simple
9.       # vxdg adddisk c0t0d0s7
10.      # vxdctl add disk c0t1d0s7 type=simple
11.      # vxdisk -f init c0t1d0s7 type=simple
12.      # vxdg adddisk c0t1d0s7
13.      # vxdctl enable
14.      # rm /etc/vx/reconfig.d/state.d/install-db

To Replace broken mirror rootdisk encapsulation -
Clear all plexes,subdisks & disk names for rootdisk using vxedit
vxdiskadm --> Option 6 ( Mirror Volume on a disk )

Upgrade DiskGroup version
vxdg upgrade <DGNAME>
vxdg -T <version> upgrade <DGNAME>      [ Use this option when u want the DG version to go to certain specific level, not the current VxVM version ]

/opt/VRTS/bin/vxdmpadm listctlr all
/opt/VRTS/bin/vxdmpadm getctlr
/opt/VRTS/bin/vxdmpadm getsubpaths ctlr=<c#>
/opt/VRTS/bin/vxdmpadm getdmpnode nodename=<diskname>
/opt/VRTS/bin/vxdmpadm enable/disable ctlr=<c#>
/opt/VRTS/bin/vxdmpadm getattr enclosure EMC0 iopolicy
/opt/VRTS/bin/vxdmpadm setattr enclosure EMC0 iopolicy=round-robin
/opt/VRTS/bin/vxdmpadm setattr enclosure EMC0 iopolicy=minimumq

vxdg -o coordinator=on init fendg fendisk1=xxx fendisk2=xxx fendisk3=xxx
vxdg deport fendgl vxdg -t import fendg1; vxdg deport fendg1
/etc/vxfendg /etc/vxfenmode
/etc/init.d/vxfen start/stop
vxfenadm -i /dev/vx/rdmp/xxx
vxfenadm -d     [ from any cluster node ]
vxfenconfig -U; /etc/init.d/vxfen stop
vxfenadm -g /dev/vx/rdmp/c2t50060482D530B433d47s2       [ Displays keys on the disk ]
/opt/VRTSvcs/vxfen/bin/vxfenclearpre                    [ To clear all registrations ]

CFS/cfs/CVM/cvm Issues -
vxdg -s init <DGNAME> diskname=disk1    [ Initialise a Shared DG for CFS cluster ]
vxdctl -c mode                  [ Check what mode the node is in ]
vxdg -sC import <DGNAME>        [ To import the DG manually outside of CFS cluster ]
                                Note: On CFS/CVM 4.1 Let Master node come fully up, mount all CFS volumes, and then do hastart on Slave

CleanUp/cleanup VxVM device paths in /dev/vx/dmp and /dev/vx/rdmp to remove conflicts -
mv /etc/vx/array.info /etc/vx/array.info.ORG
mv /etc/vx/disk.info /etc/vx/disk.info.ORG
rm /dev/vx/dmp/*
rm /dev/vx/rdmp/*
vxconfigd -k

### LVM Commands ###
pvs --segments -o +lv_name      [Display's mapping between pvs & lvs]
lvdisplay -m
lvs
lvconvert -v -m 1 testvmap2vg/testlv    [Converts to mirror volume and adds 1 copy]
lvconvert -v -m 1 --mirrorlog core testvmap2vg/testlv   [Same as above, but mirrors with exact original size]
lvconvert -v -m 0 testvmap2vg/testlv /dev/vdb [Converts mirror vol to linear by releasing vdb]
vgreduce testvmap2vg /dev/vdb
pvremove /dev/vdb               [Removes vdb completely from LVM]

Restore LVM Metadata -
/etc/lvm/backup         [Definations files for VGs should be here]
pvcreate -u ZFH10L-d30x-EheC-p03F-i0Qp-LAOC-oARwNk  /dev/mapper/mpath1 --restorefile /etc/lvm/backup/vg01       [UUID is taken from pv01 entry in VG file]
vgcfgrestore -f /etc/lvm/backup/vg01 vg01
vgchange -ay <vg-name>

Firstlook/FIRSTLOOK
start_look -l
stop_look

### FTP Outside ###
ftp gw1.csfb.com
login...
user anonymous@sunsolve.sun.com
login...

### Sun Online Account ###
http://www.sun.com/service/online/

### Telnet to FTP server ###
telnet tn-gw.csfb.net
login...
login...
Service DMZ bastion:    tn-gw.csfb.net
###

### EMC Powerpath/powerpath Stuff ###
/etc/powermt display    [ Display's available powerpaths ]
/etc/powercf -q         [ Find new storage attached after being presented and devfsadm ]
/etc/powermt config     [ Configures's powerpath in system ]
/etc/powermt display
/etc/powermt check      [ Checks and removed any dead paths ]
vxdisk rm <emcpowerxx> to remove dead or unused disk from Veritas
/etc/powermt restore    [ Try's to restore any failed path ]
/etc/powervxvm
/opt/EMCpower/cspowersetup      [ Initialises Powerpath and reads the Lic ]
emcpreg -install [ To enter the Powerpath Registration Key ]
/usr/local/sbin/ppenable        [ Enables powerpath for the 1st time, adds the entries in system file ]
/etc/powermt check_registration
For Linux - /etc/default/powerpath - set PPENABLED=yes          [ REBOOT server ]
inq -et         [ To See LUN status R1/R2 ]
inq.linux -nodots -showvol -sid -et

label the new devices presented and run vxdctl enable to online it under Veritas
/etc/vx/bin/vxdisksetup -i cXtXdX       --- this will initialise the priv.  region.

vxesd taking 100% CPU on SLES10 -Version 5.0MP3 RP2 resolves this issue. Temp fix run below cmd -
vxddladm stop eventsource

### Brass Push for Tom.T ###
Now push is from Distmaster
cd /app/eqsw-5/brass
rdist -cRv uma snfs05b:/export/deveqsw01/eqsw- 5.8/brass/uma [ verify on the Dev NFS server]
rdist -cRv uma snfs04b:/export/prodeqsw01/eqsw-5.8/brass/uma [ Verify on the Prod NFS server]

### IOSTAT options ###
iostat -xn      [ Gives you extended(x) and Numbers in cxtx (n) ]
-z      [ Useful to supress zero activity disks ]
-C      [ Gives Controller usage per cntrl ]
iostat -xnC | erep -i "%|c.t.d."        [ Best command ]
###

### TOP on Solaris ###
top -s60 -d3 -ocpu 5 >> FILE.out        [ Output to a file every min. for 3 mins. 1st 5 processes sorted by CPU usage]

echo "::memstat" | mdb -k  [ Provides correct Mem/Memory/MEMORY usage stats on Sol10 & above ]

### TOP on Linux ###
Set $HOME if its not set
Run top and select following options
n - # of lines to display
s - delay in secs
1 - toggle to display all cpus
P - sort by CPU usage
W - write to config file
### ORCA ###
On nys01i-0001 put the server under
/app/orca-data/orca/nys01i-0001/servers for it to pull orca reports.
pns15i-0108
pns15i-0125
pns15i-0128
Stat Files collected under - /app/orca-data/orca/pns15i-0108/fao/r492/orcallator/
On every Orca Client you can run the following -
Get the Stat file of interest from one of the above ORCA servers. gunzip or gzcat to a regular file
Run the below cmd on desired Columns to get stats.
/usr/local/site/perf*/orca/bin/orcallator_column -c "usr%" -c "sys%" -c "wio%" -c "idle%" orcallator-2010-01-27

### Files for VCS/vcs Veritas Cluster Server ###
main.cf, types.cf, /etc/gabtab, /etc/llttab, /etc/llthosts, /etc/sysconfig/vcs ( On Linux)
LLTTAB -
exclude 3-31
set-timer peertrouble:400
/sbin/lltconfig -T peertrouble:400

For IPMultiNICB/ipmultinicb make sure ToleranceLimit and OnlineRetryLimit is set to 1 as per Veritas.

Cluster Server 4.1 lic PZZF-8PUT-IDSX-JPII-CFCN-P6

To remove 1.3.0 VCS packages :-
VRTSgab VRTSllt VRTSvcs VRTSvcssy VRTScscm

dtfs:/itg-warl2523 VCS software

### .mwmrc file ###
users home dir needs .mwmrc file to map apps to scripts
###

### SSA Storage array ###
ssaadm display cN
ssaadm -v download -w <old-wwn> cN      # Changing WWN on SSA
ssaadm -v fast_write -e -s cN           # Enabling Fast Write
ssaadm -v fast_write -d -s cN           # Disabling Fast Write
###

### LUXADM/luxadm help  ###
luxadm probe    [ Displays all the arrays ]
luxadm display <ENCL-NAME>      [ Displays ENCL info and all disk status in that array ]
luxadm display <ENCL-NAME,[fr]#>        [Displays that disk info]
luxadm display /dev/rdsk/c#t#d#s2       [Displays that disk info]
luxadm remove_device <ENCL-NAME,[fr]#>
luxadm remove_device /dev/rdsk/c#t#d#s2
luxadm insert_device <ENCL-NAME,[fr]#>
#
HBA upgrade steps for Sun Branded HBA's
luxadm -e port
luxadm -e forcelip <paths reported in abovce command>
###

Veritas Volume Man. useful cmds...
vxassist -g datadg -b growby oradat33 18000m layout=concat mirror=ctlr ctlr:c0 ctlr:c1
vxassist -g datadg -b make oradat33 18000m layout=concat alloc=<cXtXdX> [ To make a new volume ]
vxassist -g datadg -b make oradat33 18000m layout=stripe ncol=3 stripeunit=64k alloc=<cXtXdX> [ To make a Stripped Vol ]
vxassist -g datadg -b mirror oradat33 alloc=<cXtXdX> [ To Mirror a Volume ]
vxassist -b -g datadg relayout export3 layout=stripe stripeunit=64k ncol=2 [ To relayout a concat volume in to a 2 column Stripe ]
vxassist -b -g connfs1 relayout export25 ncol=+8
vxassist -b -g connfs1 relayout export25 ncol=-2

To move/rename, remove Volume, plex, sub-disk use vxedit

### Vista Plus troubleshooting ###
--> If app dir's are full on pdcvista or pdcvista3 do...
cd /app/vista
./VMImaint1.ksh         # this will truncate and compress the logs.
--> If print jobs are stuck for vista application do...
on pcdvista or pdcvista3 - Kill rcapture job
lpstat -o
ps -ef | grep -i rcapture; kill <PID>   # rcapture will respawn a new instance
lpstat -o       # Jobs should start moving
###

### Clearcase Troubleshooting ###
/usr/atria/bin/cleartool endview -server <view Name>    --To clear the views
/usr/atria/etc/atria_start stop
/usr/atria/etc/atria_start start
###

###     Sybase Interfaces       ###
NFS location /export/vol/sybase/interfaces is the SUNOS 4.X version
NFS location /sw/sybase/interfaces is the Solaris version
###
### chem_clearing script for teller ###
cd /home/async/scripts NFS mounted.
modify chem_clearing script as per the username. This scripts allows user to
connect to particular Teller TS on trading floor.
###

###
To install pan image on the Bframe

pan -a -R -C /crash_dumps/images/GENG-Linux-AS3.0-3.0e.tgz -F ext3,ext2 -T
RHAS3.0 -P "CSG 3.0 Linux Build" RH_AS_CSG30

pan -a -I -C /tftpboot/bzImage-2.4.21-9.0.1.ELsmp -P "Lunix
2.4.21-9.0.1.ELsmp " RH_AS_CSG30
###

### rpm commands on Linux/linux ###
rpm -q -a | grep "ksh"  [ will show packages with ksh ]
rpm -q -l <package-name>
rpm -q -f <filename>    [ will list package to which that file belongs ]
rpm -q -R <package-name>        [ show reqd. prerequesites for this pack.]
rpm -qi <pkg-name>
rpm -ihv <package-name> [ Install package ]
rpm -Uhv <package-name> [ Update Package if already installed to newer patch level ]
rpm -e tcsh     [ remove package ]
rpm -ihv --nodeps       [ Don't do pkg dependency checks ]
rpm -ihv --test         [ Perform a dry-run, don't install ]
rpm -qp <rpm-pkg>
rpm -qp <rpm-pkg> --requires    [ Will show you what is required by this pkg ]
rpm -qip <rpm-pkg> --scripts
rpm -qa --queryformat '%{name}-%{version}-%{release}.%{ARCH} Insallted %{installtime:date}\n'|sort
rpm --rebuilddb [incase *db files are corrupt in /var/liib/rpm. delete those *db files 1st]
###

### RPMBuild/rpmbuild Help on Linux ###
rpmbuild -ba netbackup.spec
For errors with - make: install is up to date   [use make -B optioin as below.]
make -B install prefix=$RPM_BUILD_ROOT
You might get RPATH errors sometimes while making directory structure within rpmbuild.
QA_RPATHS=$[ 0x0001|0x0002|0x0004|0x0010 ] rpmbuild -ba NetbackupClient.spec

To avoid pkg dependency checks in RPM's add below line above Requires clause in the SPEC file -
%define __find_requires %{nil}
###

### Some Help on SED ###
sed '/string/a\<actual-newline>text' filename   ## To append line after string in filename
NOTE: At BS the above command also worked without the actual NEWLINE. So try without it as this will avoid putting unnecessary control chars. in the file.
sed -i -e 's/String1/String2/g' filename        # With -i optioin you can change the same file
sed -n -e 120p -e 145p -e 1050p /var/log/syslog
sed -n 101,110p headup/var/log/cron
sed  's|\r||' -i_BKP <CERTIFICATE>.crt  <--- This is an alternative to dos2unix

### Misc. ###
Equity Production       elvis.eqteur.csfb.com
Equity Development      lucan.eqteur.csfb.com
FAO/FIDS production     lns00i-1401.csfp.co.uk
Exchange Mail Server    enyc19p32002
Home Drive (H:)         \\cnyc19p20003d\abhat$
F: drive (RO apps)      \\snyc19p23006\ROAPPS
V: drive                \\snyc10283\dfsroot$

========
passwd.adjunct file creation from passwd file
nawk 'BEGIN { FS=":"; OFS=":"; } /^[a-zA-Z0-9_]/ { $3 = ""; $4 = ""; $5 = ""; $6 = ""; $7 = ""; printf "%s\t%s\n", $1, $0 }' passwd | awk '{print $2}'

cat /tmp/qc_linux.tmp | tee /dev/stderr | mailx -s "b7dtestvmap1" anant.bhat@ny.frb.org
========

========
CDJUKE / cdjuke
Studio Model:   DVD+CD#7062 4.69ERL
Robot Model:    UO45910
Printer Model:  UO45975
Young minds Inc:        (909) 426-4860 ext 41   Ronald, Ryan
makedisc -g -R -c -s -P50000 -H /export/cdjuke01a/work /export/cdjuke01a/legal YMTRANS.TBL /dev/rmt/0 650
-P =>   This option will pad 100M data at the end of DVD in eg. above to
avoid write failures incase of very less datasize.
Commands used =>
      $ROOT_DIR/bin/burnCDrom $1
      $ROOT_DIR/bin/createCdromFile $1
      $ROOT_DIR/bin/cutCdromFile
Burn    /export/archive01b/archive2/cdrom
========

========
CLARiiON issues with VXVM
lpfc.conf
no-device-delay=0 parameter in /kernel/drv/lpfc.conf.

For VXVM
vxddladm listjbod       (Before DGC was added)
      VID      PID              Opcode   Page Code   Page Offset      SNO length

==========================================================================
      SEAGATE  ALL PIDs            18         -1         36           12
      SUN      SESS01              18         -1         36           12
vxddladm addjbod vid=DGC pagecode=0x83 offset=8 length=16
vxddladm listjbod
      VID      PID              Opcode   Page Code   Page Offset      SNO length

==========================================================================
      SEAGATE  ALL PIDs            18         -1         36           12
      SUN      SESS01              18         -1         36           12
      DGC      ALL PIDs            18         131        8            16

vxddladm listsupport all
vxddladm addjbod vid=TMS length=10      [ To add RamSan Disk Array in list of devices ]
vxdisk set track align=enable offset=128        [ To have disk alignment for Solid state devices ]
========
Remote Desktop
logon : abhat   Domain : CSFB
WS Name : wnyc110018261
IP :    169.39.172.125

========
Notes on VXFS/vxfs, QIO/qio -

VXFS error
vxfs mount: ERROR: Cannot open portal device
/dev/vxportal -> ../devices/pseudo/vxportal@0:0

qiomkfile -s <size> <filename>  ### To make a Quick IO file

fsadm -D <mnt_pt>       Report on Dir fragmentation
fsadm -E <mnt_pt>       Report on Extent fragmentation
fsadm -d <mnt_pt>       Defragment Directories
fsadm -e <mnt_pt>       Defragment Extents
fsadm -o largefiles <mnt_pt>    Modify FS params to support largefiles

Mounting VxFS filesystem from Solaris to Linux - Filesystem initially created on Solaris
umount /<mnt-pt>
fscdsconv -v -t os_name=Linux /dev/vx/rdsk/PNYODS_migrdg/u01
fscdsconv -e -f /var/tmp/<recovery-file> -t os_name=Linux <raw-device-path>
fscdsconv -i -f /var/tmp/<recovery-file> <raw-device-path>
========

========
Some help on Samba/samba/SAMBA
Please do the following after Building a new OR upgrading Samba server
security = domain       [in smb.conf file]
smbpasswd -j <AMRES> -r <PDC> -U<login> # This creates the new security.tdb file which
allows the new samba server to join the domain.
PDC = Primary Domain Controller
The above step is not required if you have security = user in smb.conf

SMBMOUNT/smbmount example below to mount windows share on Linux -
mount -t cifs -o rw,username=abhat3,uid=mdwadmin,gid=other '//slon12p20010/uploadsdrop$' /app/RMM_SHARE
mount -t cifs -o rw,user=b1axb14 "//B3PFS226/B122226/Home/MKT/A-C/B1AXB14" /mnt
mount -t cifs -o rw,user=b1axb14,password=$DENC "//B3PFS226/B122226/Home/MKT/A-C/B1AXB14" /mnt
ENC=$(perl -e 'print unpack "H*", "mypasswd"')
DENC=$(perl -e 'print pack "H*", "encrypted-string"')

Samba server URL for Corpny domain - corp-samba.corpny.csfb.com.
corp-samba is load balanced between 3 corpny servers - pns18i-0024, pdcsmb01 & emasmb01
========
========
CRON/cron issues -
cron aborting due to FIFO exists....
simply remove this file /etc/cron.d/FIFO which is a special pipe file & restart cron
========
EDOM Server:    css7b.csfp.co.uk


############################################################################
####
BEAR STEARNS        #

############################################################################
####

=====
To Push CIMS update to a particular domain only ---
=>Log in to the NIS master of the domain you want to be updated...
=>Run the following command below to pull the NIS map changes from CIMS.
/opt/CIMSclnt/bin/cims -p nis -c -D 0

=> pbradius1.is.bear.com & pbradius2 = Use to edit PMDB pperms
  Login as unixsa -> u will get a Etrust menu

=> otirq -c Node_Name,App_Acronym,Object_Type,Primary_x,Secondary_Contact -q "App_Acronym like 'WOMBAT'"
  Above command can be used to query Remedy database to get Bear server info

etrust installation needs 110934-24 for Solaris8 installations & 106292-14 for Solaris2.6
/opt/CA/eac/bin/sereport -p [ To get a report of any untrusted files in the system ]
OLD Etrust/etrust File: /net/dtfs/itg-packages/PROD/generic/eTrustAC.OLD
OLD Etrust/etrust uninstall script: /net/dtfs/itg-packages/PROD/generic/eTrustAC.OLD/uninstall_eTrust

To run PRE-CHECKS/precheck on any host for etrust install -
On sorcerer: cd /net/dtfs/itg-etrust/utilities/precheck
/opt/python/bin/python precheck.py ssh2 scp2 {ACENAME} {HOSTNAME}

Problem with the /etc/.login for any user using csh/CSH shell -
This can be fixed by updating the /etc/seos.ini
In the [sesu] section of code, the following tags need to be updated:
; old_sesu = yes
old_sesu = no

After the change of these tags, please run:
/opt/CA/eac/bin/secons -rl

/opt/CA/eac/bin/selang
> sg EQ_SA_SUPPORT      ( showgroup )
> su j941592            ( showuser )

/opt/CA/eac/install_templates/add_local_users.sh

=======
NIS MAPS on ypms1 -
ALL maps located in /etc/bears.
use RCS commands ci -u -M -q netgroup from /etc/bears dir. to check in the maps if locked.
Also delete the resp file from /etc/nis/locks dir.
=====

Tripwire/tripwire: /net/dtfs/itg-packages/PROD/5.8/sysadmin/

=====
LWC/lwc File on sorcerer: sorcerer:/warl203/term-server-info/termhosts
=====
Some help on rsync/RSYNC/Rsync
rsync -av --delete /src/ /dest/ [ Will sync /dest with /src locally ]
rsync -avz --delete /src/ HOST:/dest/ [ Will sync /dest on HOST with /src remotely.]
rsync -avxzB 20480 --progress /src HOST:/dest/
-z option above compreses data before sending on network
-x Stays within filesystem boundaries
--rsync-path=<path of rsync on the remote host>
rsync -avz /src/ HOST:/dest/ [ Will not delete extra files on HOST:/dest ]
rsync -nav --delete /src HOST:/dest/ [ Do a Dry Run only donot do anything ]
ALso -x option will not cross FileSystem boundaries
Use -e <path to ssh> option to force rsync to use ssh instead of rsh

rsync command to copy ssh keys on newly built host -
cd /root; OR cd / [ in Solaris/unix ]
rsync -av --numeric-ids 147.107.48.6::linux-install/files/repository/.ssh /root [ Copies from host hieneken ]
rsync -avxB 20480 -e "ssh -p 44" --exclude="omd/.ssh/*" --progress omd b7dtsardb2:/apps/
=====

=====
mkyast/MKYast Notes -
mkyast@172.26.106.216 deploy
=====
=====
SunFire V440/v440 : Hardware Raid
raidctl [ Shows/Displays raid mirrors and there status ]
raidctl -c c0t0d0 c1t1d0 [ Creates a raid mirror and overwrites c1t1d0 with c0t0d0 ]
raidctl -d c0t0d0 [ Delete the raid, need to specify primary disk ]
=====
=====
GFS -
if a GFS node is hung and not able to mount any GFS fiilesystems then, do the following on other GFS node:-
gulm_tool nodelist localhost [ To find out list of GFS nodes ]
fence_ack_manual -s 192.168.97.24 [ Run this from the Master/Arbitrating node, IP is the ip of stuck/hung node ]

==>Get a safe maintenance window to bring node back into cluster
# chkconfig ccsd on
# chkconfig cman on
# chkconfig fenced on
# chkconfig clvmd on
# chkconfig rgmanager on

# /etc/init.d/ccsd start
# /etc/init.d/cman start
# /etc/init.d/fenced start
# /etc/init.d/clvmd start
# /etc/init.d/rgmanager start
=====
SHELL/shell HELP: TMP=`mktemp /tmp/autofs.XXXXXX` || { echo $"could not make temp file" >& 2; exit 1; }
SHELL/shell:    Read 2 Variables from a file and process -
               grep -v "^#" ABC | while `read A B`; do echo "$A and $B"; done
Autocomplete in KSH/ksh:        <esc>\  ### This key combination works

=====
!!! MAKE SURE THE BELOW Steps ARE DONE FROM A VALID CONSOLE !!!

Find THIS TAR file under /net/dtfs/itg-packages/PROD/generic/BSCopenssh-Prep.tar

OPENSSH/openssh:-
Here are the steps:
1. Log into CIMS, un-assign module ssh/ssh2, assign module openssh to the target host
2. untar the tar file onto target host?s /opt directory
3. on the target host, run:
a. /opt/BSCopenssh/convert/openssh-prep.sh, which will
i. Copy all pkgs over to /opt/tmp/opensshPKGs
ii. Convert host and user keys

b. /opt/BSCopenssh/convert/openssh-install.sh, which will
i. Stop and pkgrm old ssh pkg
ii. Install BSCprngd pkg if not exist
iii. Install BSCopnssh pkg
iv. Chmod /.ssh /.ssh2 permissions
v. Pull openssh module

############

Building initrd image -
After adding anything to modules.conf(Rhel 3) or modprobe.conf (Rhel 4) rebuild initrd image -
cp /boot/initrd-(kernel-version).img /boot/initrd-(kernel-version).img.bak
mkinitrd -f initrd-$(uname -r).img $(uname -r)


All our Linux systems have the full documentation in /usr/src/linux.Documentation/sysrq.txt
The short form:
If you're on the console, you must first enable the subsystem with the command:
echo 1 > /proc/sys/kernel/sysrq
Then you can press Alt+SysRq followed by one of the following commands
(and there are many more commands than these):
s Sync Forces a sync, and prints 'OK' to the console when complete.
u Umount Try to umount all filesystems & remount read-only
b Boot Reboot the system without killing any processes
Best if you use Alt+SysRq-s and Alt-SysRq-u first to avoid data loss
Similarly, if you can still log into the server, you can also control this functionality using /proc/sysrq-trigger:
echo s > /proc/sysrq-trigger (like Alt+SysRq-s)
echo u > /proc/sysrq-trigger (like Alt+SysRq-u)
echo b > /proc/sysrq-trigger (like Alt+SysRq-b)
On actual console send "Alt+SysRq+<cmd>"
On serial console send "Break" followed by one of the below cmds within 5sec.
m - dump information about memory allocation
t - dump thread state information
p - dump current CPU registers and flags
c - intentionally crash the system (useful for forcing a disk or netdump)
s - immediately sync all mounted filesystems
u - immediately remount all filesystems read-only
b - immediately reboot the machine
o - immediately power off the machine (if configured and supported)

To take a crash dump on a hung RHEV VM / rhev vm -
virsh dump domain-name /tmp/dumpfile --memory-only --verbose    [ To be run from the Hypervisor the VM is running from ]
=====
Booting from net using DHCP/dhcp on SUN -
ok boot net:dhcp - install
ok boot net:dhcp -sv [ Booting in single user mode ]
nmap -sU -p 69 10.31.91.0/23
nmap -sT -p 69 10.31.91.0/23
lsof -i :7591           [ list the process responsible for listening on this port ]
lsof -i 4 -a
/usr/sbin/lsof -i 4 -a -p 24802         [ lists all ipv4 ports listening for PID 24802 ]
netstat -tlpn
ss -turnup
=====

=====
Some help on VI/vi Editor/editor
:g/^$/d         ### Deletes every blank line in the file
:g/string/d     ### Deletes every line that contains string
:v/string/d     ### Deletes every line that doesn't contain string
:%s/.*/\L&      ### Converts every uppercase char to lowercase
:%s/.*/\U&      ### Converts every lowercase char to uppercase

####################################################
#                                                  #
#       JPMC    JPMC    JPMC    JPMC    JPMC       #
#                                                  #
####################################################
SID:    J941592 / N128020 (Emp)
GID:    27808B

Login Tree:     JPMORGAN_TREE
Context:        Users.CSS.ONEDESK.EQ.NYC.AM.JPMORGAN
Login Tree:     ATLAS
Context:        EDG.EQ.IB.Midtown.MH.NYC.NE.AMER.CORP
H Drive:        j941592 on \\Nyeqdcl2_mouser_server\Mouser\Css
New H Drive:    j941592 on \\mfnfiler13-infra.ny.jpmorgan.com\eqdata2\Eq\Equsers
N Drive:        \\vs1277papp01\xpapps
Softwares:      N:\source\
GTI Netbackup Client Software:  gti0w037.ad.bankone.net (169.81.24.163)
Printers on 11th Fl:    10.27.171.216 & 10.27.171.236

BlackBerry Server:      NYC-BES-09
MailServer:     RMAIL118/JPMCHASE
Lotus Notes Workspace File:     desktop6.ndk
Exchange Server:        emarc01vs01
Sametime Host:  IMreg   Community Port: 1533    Meeting Port: 8081
                       Proxy Type: SOCKS4 proxy
                       ProxyServer: nts-northamerica-lgl-ft02.jpmorganchase.com
                       ProxyPort: 1080
Sametime 7.5.1: im-na.jpmorganchase.com j941592
Temp Laptop login ID:   sattest context:         Users.SAT.ONEDESK.EQ.NYC.AM.JPMORGAN   Tree: JPMORGAN_TREE
VoiceMail/voicemail:    212-622-7200    2-0476  <pass>
Bear DMZ Access:        pbproxy1.is.bear.com / pbproxy2.is.bear.com
Access to Bear Proxy:   http://jpmcbsproxy.jpmchase.net:8080

HelpDesk Toll Free:     866-576-1818.   [ 8-576-1818 ]
Unforward group Hotline:        Select the hotline - #22 - You hear the confirmation
Hotline Issue: Forwarding directly to VM - Select Hotline - #33 - Select Hotline again - #22

Free IP's on 11th/277 - 10.27.117.86/255.255.255.0/10.27.117.251
Opsware/opsware Server - opsw-na1.jpmchase.net opsw-na2.jpmchase.net
Tokyo Release Server - tkuf2p0001.tk.jp.chase.com       KEON domain tkprd_eqt
                       EiDRS DB - HK-WTC01_DR/CHASE  filename - apps\StdEIDRS\eid.nsf
EMEA Release Server -   msp-dist1.uk.jpmorgan.com

Filer/filer for FONY/fony:
cmcfiler8-infra.ny.jpmorgan.com:/vol/cmcfiler8_shared/gtidct_dev_mware
cmcfiler8-infra.ny.jpmorgan.com:/vol/cmcfiler8_gti_mware_dev/gti_mware_dev
websphere/WebSphere, apache, Zend/zend, PHP/php
websphere/WebSphere install: ./installwas5.sh -inst 0  -was_install_root /apps/websphere/5.0/AppServer/0  -userid mexwasp0 -group mexwasp0

Test WebSphere IBMHttp server URL: https://b3dftrap4.mg.ny.frb.org:444/dmgrlogs
WebSphere IBM Console URL: https://b3dftrap4.mg.ny.frb.org:9043/ibm/console
/apps/WebSphere/was855/AppServer/profiles/gtx/config/cells/gtxCell/nodes/gtxNode/servers/gtxServer/resources.xml
/apps/WebSphere/was855/AppServer/profiles/gtx/config/cells/gtxCell/security.xml
/apps/WebSphere/was855/AppServer/profiles/gtx/config/cells/plugin-cfg.xml
/apps/WebSphere/was855/AppServer/profiles/gtx/properties/soap.client.props
/apps/WebSphere/was7/AppServer/profiles/gtx/databases/EJBTimers/gtxServer/EJBTimerDB
/apps/WebSphere/was855/security_kerb/krb5.conf (For SSO Setup)
/apps/WebSphere/was855/AppServer/bin/versionInfo.sh
/apps/WebSphere/was855/AppServer/profiles/gtx/bin/versionInfo.sh
/apps/WebSphere/was855/AppServer/bin/managesdk.sh -listEnabledProfileAll
After every application deployment Generate Plugin for that application profile. GenPluginCfg.sh

VNC/vnc:
export PATH=/apps/JPMvnc/3.3.7.1/solaris-5.8/bin:/apps/JPMvnc/3.3.7.1/solaris-5.8/sbin:$PATH
nohup Xvnc :30 -desktop X -auth /home/sysadm/j941592/.Xauthority -geometry 1280x1024 -depth 16 -rfbwait 120000 -rfbauth /home/sysadm/j941592/.vnc/passwd -rfbport 5930 -pn -query localhost &
To CUT & PASTE from VNC:        vncconfig &

Console/consoles at JPMC -
       eqny-admin6:    Under /usr/local/bin
                       cyc <server-name>       [ script to connect to console ]
                       server <server-name>    [ Location/Serial info ]
                       SUN v40Z - ssh -l sroot <server-name>-sp
                       HP: http://<server-name>-sp/
       eqadmin:        cd /con; ./lw <server-name>

NIS Switching at JPMC: /etc/NISDOMAIN.nsswitcher file determines which env the server will boot in. /etc/init.d/nisswitcher is the script that controls this behaviour


FTP/ftp out of JPMC:    ftp to ftpgate.ny.jpmorgan.com --> when prompted for username: <enter dest username@sun.com> & pw: <pw at the vendor>
FTP/ftp out of JPMC (NEW): ftp ftpproxy.jpmchase.net 8021 --> when prompted for username: <enter dest username@sun.com> & pw: <pw at the vendor>
Prod Rel FTP/ftp: eqs-supp3.uk.jpmorgan.com - nyrel - release
Timesten/timesten dump locations in PROD:       eqny-cshpt4 - /home/cheops/cheprod/logs/tt_backups
Clipper/clipper: eqny-edgcmp8 user - clipprd ; crontab -l; clipper_app stop/start broker,calculator,parser
Sumatra/sumatra Bounce: edgdiv2-s1 - sumatra.startup -pEJS_SET -l/home/edg_web/mihprd/logs/sumatra.log; owned by mihprd/mihmars
Saturn/saturn Bounce: edgdiv2-s1 / edgdiv2-s2 - /etc/init.d/primeswap stop/start; Owned by mihprd/mihmars
Tradescope/tradescope: eqny-cshweb1 - tsprd - crontab -l; /apps/bin/tscope_mysql_web_start/shutdown
TREF/tref: eqny-uatld1 - trefuat - trefadmin  -c  start_tref -inst eqny-uatld1 -startOfDay
OSIBROKER/osibroker: cshpt3/4-adm - ptosiprd - /opt/bin/OSIBROKER START/STOP ALL ARCHIVE (check cron)
p3Daemon/exDaemon - eqny-cshdo2 - eis_prod (crontab -l) Load eisDaemons startDaemons / endDaemons
clientdirectui: eqny-cshweb1 - cduiprd - /apps/bin/clientdirectui_Start/Stop - crontab -l
VolMetrics/volmetrics: eqny-edgriv2 - iaqtprod : /apps/bin/volmetrics_server, volmetrics_server stop
POSN/posn: eqny-edgcmp7 - iaqtprod : /apps/bin/posn_server, posn_server stop
cheops/CHEOPS mqrouter, phase3feed, fixrouter, p3router: eqny-cshpt4 (VCS) - /opt/scriptpt4/bin
unicon/Unicon mqrouter - uniprd - eqny-cshpt3: routers_stop.sh/start unicon_xpedite - Process: unicon_mqr
unicon/Unicon router - uniprd - eqny-cshpt3: routers_stop.sh/start all - ( for all Unicon routers )
onsite/catwalk/fles adapters - eqny-eespat1 - epatprd: /apps/bin/pat_ees_start/stop catwalk_adapter/flex_adapter/onsite_adapter
position/noe/snap/scheduler: eqny-cshpat1/2 - cpatprd - /apps/bin/pat_cash stop/start position/snap/scheduler
position/noe/snap/scheduler: eqny-ptpat1/2 - ppatprd - /apps/bin/pat_pt stop/start position/snap/scheduler
Poller/poller - eqny-rdls1 - rdlsprd: Load ant; Load poller; runPoller/stopPoller
IMKTDM/imktdm - eqny-cshcmp1 - rdmprd crontab -l
FIX/fix port maps: DMZ -> eqny-uatcc1 -> <Internal hosts> - Always bounce process on uatcc1 as fix (crontab -l)
Mapfile/mapfile copy:   eqny-scsyb1 -> eqny-admin6 -> eqny-edgxd16
       Location:       /opt/mlis/5.6.8.0/solaris-5.8/config/mapfile.txt on eqny-scsyb1 [ run in bash shell ]
MarketLook/marketlook passwd reset: On eqny-scsyb1 - /usr/local/bin/marketlook_change_pw.sh <user> <277/nyse> - users dump in /tmp/users - DMZ server
GTW/gtw PROD Website: read-only group = ges; read-write group = ges_ref Login: admin/p1...
SAMBA/samba/Samba accounts creation:    On eqad-nfs1 - /apps/JPMsamba/2.2.7.a/solaris-5.8/bin/smbpasswd -a <user>
mqm/MQM: Starting mqm queue manager - strmqm <Queue-name>
DOME:   eqny-cshdo1/2
PROD to UAT softdefs copy - From eqny-edgcmp8 & cshnap1-adm run ~vvanka/env/uatsoft.sh
fixioi: eqny-cshcmp1 - parprd - Load fixioi; fixioi stop/start (Check crontab)
AMM/amm: eqny-mmpat1-6 - ammprd - amm / amm_stop, reamps(mmpat2), ammlos(mmpat4)
FixGateway/NyFixGateway - eqny-cshcmp2 - grmprd - USER=grmprd; export USER;Load grm_prod; man_stop/man_start FixGateway/NyFixGateway
crstal-reports: BCP - crstlcon - crystal_start, crstl_web_start; Check shd start only one weblogic process owned by crstlcon
                       cd /apps/crystal/10.0.0.0/solaris-5.8/crystal; ./ccm.sh -start cms
Operate Webserver: eqny-remedy1 - /etc/init.d/iplanet-operate start/stop
XGW/xgw: Internal admin server - eqny-cshhpns2, DMZ admin server - eqny-fix1
            Port reset - always on internal server eqny-cshhpns2 <port no>
            grep "<compid>" /apps/xgw/<ver>/soalris/run/*.dat; tail thatdatfile
            xgw> status <compid>       [ status LMFM/TACCRD ]
            xgw> close <the top FD port>
            xgw> exit
ScalaPNL:       web servers on enapl-ae001/002
=================================================
Build procedures at JPMC
=================================================
For any DNS/MACD request use ECMS#257615
Install config for Redhat builds - /ks/lrh3/installdb/host.db file

To Build linux on HP DL585's use foll build command -
boot: linux ks=nfs:10.3.91.5:/ks/ks_eqny-subver1.cfg ip=1.2.3.4 netmask=255.255.255..0 gateway=1.2.3.1



==================================================
TCP/tcp Tunning/tunning Params for Solaris & Linux
==================================================
Increase TCP Buffer size to speed up network packet xfer
ndd -get /dev/tcp tcp_xmit_hiwat        [ TCP transmit window size ]
ndd -get /dev/tcp tcp_recv_hiwat        [ TCP receive buffer size ]
/proc/sys/net/ipv4/tcp_wmem             [ TCP transmit window size 3 Int value min,default,max ]
/proc/sys/net/ipv4/tcp_rmem             [ TCP receive buffer size 3 Int value min,default,max ]
/proc/sys/net/ipv4/tcp_window_scaling   [ This needs to be enabled for the above 3 values to scale ]
/proc/sys/net/core/wmem_max             [ Need to raise the core value for all protocols before changing TCP ]
/proc/sys/net/core/rmem_max             [ Need to raise the core value for all protocols before changing TCP ]

# Below paramaters are required on Solaris 10 if router MAC get removed from arp cache
ndd -set /dev/ip ip_ire_arp_interval 86400000
ndd -set /dev/arp arp_cleanup_interval 3600000

=====================================
Some useful KSTAT/Kstat/kstat cmd's on solaris:

kstat nxge:0 | grep -i link
kstat -m cpu_info

=====================================
Sun V40z/v40z SP commands help
=====================================
sp get events
sp get tdulog
inventory get software
inventory get hardware -v
sp set locatelight blink/off
sp get date
sp get ip
sp get hostname
sp set hostname HOSTNAME        [ after booting SP for 1st time ]
Set the IP for SP from the front panel [ After 1st SP boot ]
platform set console -s sp -e -n -S 9600 -l 244 [ Set platform console ]
sp set date -h  [ See help tp set correct date ]
access add user -u sroot -g manager -p <pass>

Update BIOS on V40z/V40Z/v40z
sp add mount -r 10.3.23.1:/u1/firmware/V40Z -l /mnt
eqny-conem1-sp $ sp get mounts
Local Remote
/mnt  10.3.23.1:/u1/firmware/V40Z
platform set power state off
platform set os state update-bios /mnt/sw_images/platform/firmware/bios/V2.35.3.2/bios.sp

==============================================
Procedure to Install GRUB/grub on mirror drive
==============================================
1. As root run "grub"
2. At grub prompt execute the foll.
       grub> find /boot/grub/stage1
(hd0,0)
(hd1,0)
       grub> device (hd0) /dev/sdb
       grub> root (hd0,0)
       grub> setup (hd0)
/boot/grub/grub.conf"... succeeded
Done.
       grub> find /boot/grub/stage2
(hd0,0)
(hd1,0)
       grub>quit

perl -pi -e 's:2.6.16.60-0.21-:2.6.16.60-0.54.5-:' /boot/grub/grub.conf
ping 10.102.18.1 | perl -nle 'foreach ($_) { print scalar(localtime), " ", $_; }'
perl -pi.bkp -e 's/(\w+)/\U$1/gm' TEST1         [Transform to uppercase across multiple lines]
perl -pi.bkp -e 's/(\w+)/\U\1/gm' TEST1         [Transform to uppercase across multiple lines]

Notes from Sachin.Dev -->
nyl06i-9801:/app/lltops/BUILD
/app/lltops/BUILD/CONFIGS/nyl75a-6901a.cfg
/app/lltops/BUILD # ./llbuildconfig.pl --host nyl75a-6901a

==============================================
Some Help on MDADM/mdadm
==============================================
mdadm /dev/md1 -a /dev/sdb1     [ To attach removed/failed disk sdb ]
cat /proc/mdstat
mdadm -Ebsc partitions

==============================================
SSH Tutorials
==============================================
ssh-keygen -t rsa -N ""         [ login as userid; run this cmd for null passphrase ]
ssh-keygen -t rsa               [ rsa key type is preferred. Enter passphare when prompted ]
plink -ssh -load hbs95a-4409_20100930 -v -s -l operasvn -batch ./svn_scripts [ SSH from windows using keys without passwd auths ]

To disable Host key checking on ssh client set "StrictHostKeyChecking" to no in ssh_config file
==============================================
/usr/sbin/hbanyware/hbacmd ListHBAs
/usr/sbin/hbanyware/hbacmd TargetMapping 10:00:00:00:c9:4e:af:9b

/usr/sbin/lpfc/dfc
cmd>set board 0
cmd>hbaattr
Manuftr:Emulex Corporation  SerialNum:0000c944a967
Model:LP9002  Description:Emulex LightPulse LP9002 2 Gigabit PCI Fibre Channel Adapter
Driver:6.01f  DrvrName:lpfc Firmware:3.90A7 (C2D3.90A7)
NSymName:Emulex LP9002 FV3.90A7 DV6.01f  Hdw:2002606d ROM:1.40a0
VendorId 0xf90010df  numPorts 0x1
Nodename:20:00:00:00:c9:44:a9:67
cmd>instance
lpfc Driver Interface 0: Adapter 0
lpfc Driver Interface 1: Adapter 1
cmd>

Setting Lun Queue depth in Linux/linux -
lpfc options lpfc_lun_queue_depth=64    [ In /etc/modprobe.conf.local for Emulex cards, default is 32 ]
options qla2xxx ql2xfailover=0 ql2xmaxqdepth=new_queue_depth    [ In /etc/modules.conf for QLOGIC cards ]

To verify/check current Queue Depth - /proc/scsi/sg/devices file 7th column represents queue depth.

==============================================
Some help on Solaris10/solaris10
==============================================
zoneadm list -iv        [ To list all Zones in a system ]
zonecfg:b3dgtxap1> info
zonecfg:b3dgtxap1> info net
zonecfg:b3dgtxap1> select net physical=igb0
zonecfg:b3dgtxap1:net> info
zonecfg:b3dgtxap1:net> set address=a.b.c.d
zonecfg:b3dgtxap1:net> set defrouter=a.b.c.1
zonecfg:b3dgtxap1:net> end
zonecfg:b3dgtxap1> info net
zonecfg:b3dgtxap1> commit
zonecfg:b3dgtxap1> exit

route -p add -net 10.102.20.0 -netmask 255.255.254.0 10.54.21.129 1 -ifp igb1
route -p add -net 10.102.100.0 -netmask 255.255.254.0 10.54.21.129 1 -ifp igb1
route -p add -net 10.54.17.0 -netmask 255.255.254.0 10.54.21.129 1 -ifp igb1
route -p add -net 10.56.17.0 -netmask 255.255.254.0 10.54.21.129 1 -ifp igb1

boot -m milestone=none / milestone=single-user | multi-user | multi-user-server
fcinfo hba-port
fcinfo remote-port -s -p <WWPN>
mpathadm list lu
/opt/EMLXadm/bin/emlxadm

==============================================
Some help on OBP/obp
==============================================
show-disks
show-nets
show-devs
setenv/printenv
Solaris 8 Break/break sequence: ~<cntrl>B
T4-2: Break/break/BREAK: set /HOST send_break_action=break

iLOM / ilom
-> cd /System/PCI_Devices
-> ls
-> pwd
Current default target: /System/PCI_Devices
-> show Add-on
/System/PCI_Devices/Add-on
    Targets:
        Device_1
        Device_2
        Device_3
        Device_6
        Device_7
        Device_8

    Properties:

    Commands:
        cd
        show
==============================================
Some help on MQ/mqm DCE/dce
==============================================
MQM needs DCE/dce
./dcesetup install [ Select options - client, no, yes ]
/usr/bin/config.dce rpc -cell_name LIGHTWEIGHT_CLIENT -dce_hostname LIGHTWEIGHT_CLIENT  [Run as it is]

su - mqm
mqver           [ MQ Version Info ]
strmqm <Queue Mgr Name>
runmqsc <Queue Mgr Name>
       display q(CSW.GAS_TO_DOME_Q) curdepth
       dis q(DOME*) curdepth
       display q(*)            ### Diplays all the queues for the Qmgr
endmqm -i <Queue Mgr Name>
dltmqm <QueueMgr>
qload -dai -mNYPSCHP1 -ICHPS.LQ.EQU_PROD1.NY1.OUT.CSW.EP_RAISE.1 -F/var/tmp/mqm.NYPSCHP1.CHPS.LQ.EQU_PROD1.NY1.OUT.CSW.EP_RAISE.1
display qs(CHPS.LQ.EQU_PROD1.NY1.OUT.CSW.EP_RAISE.1) type(handle) opentype(all) all    [ to display open filehandles ]

To restart MQ Broker -
strmqbrk -m <

==============================================
Dollar Universe / dollar universe help
==============================================
Install - copy over /opt/universe       [ Create a automount entry in auto.opt for universe ]
         link /usr/lib/libux_v500 -> /opt/universe/JPMTST/exec/lib
Jobs reside in - /opt/universe/JPMTST/exp/upr
Host name mapping file for $universe -  /opt/universe/JPMTST/mgr/uxsrsrv.sck

==============================================
KEON Commands
==============================================
server - cmc3asfn12.ny.jpmorgan.com
/opt/boksm/sbin/boksadm -S
BoKS 5.6
BoKS > sysreplace restore
BoKS > Boot -k
BoKS > exit
ibus_linux_dmz.tar

==============================================
ESM Help
/opt/esm/bin/lnx-x86/register -m itr0s001.svr.bankone.net -U register -P reg1ster -N  fony-xtweb1.ny.jpmorgan.com -d "NP_IB_EQUITIES_OS"

CDE / X11 / dtlogin on Solaris 10 for VNC / vnc
Conf Files:     /etc/dt/config/Xservers, Xaccess - Copy these 2 files from /usr/dt/config/
Modify Xservers to have only these 2 entries at the bottom -
:0 Local local_uid@console root /usr/openwin/bin/Xsun :0 -nobanner -dev /dev/fb0
:1 Local local_uid@none root /usr/X11/bin/Xserver :1

SVC / SMF needs following changes to enable Xwindows -
# svccfg -s cde-login
svc:/application/graphical-login/cde-login> setprop dtlogin/args=""
# svccfg -s x11-server
svc:/application/x-11/x11-server> setprop options/tcp_listen=true
# svccfg -s nfs/mapid setprop "application/auto_enable = false"
# svcadm refresh nfs/mapid

xmllint /var/svc/manifest/site/ndd-nettune.xml
svccfg validate /var/svc/manifest/site/ndd-nettune.xml
# vi /lib/svc/method/ndd-nettune
#!/sbin/sh
#
. /lib/svc/share/smf_include.sh
. /lib/svc/share/net_include.sh
# Make sure that the libraries essential to this stage of booting  can be found.
LD_LIBRARY_PATH=/lib; export LD_LIBRARY_PATH
echo "Performing IP Tuning..." >> /tmp/smf.out
/usr/sbin/ndd -set /dev/ip ipmp_hook_emulation 1
# Reset the library path now that we are past the critical stage
unset LD_LIBRARY_PATH

On Solaris10 CSS 2.1 there is a bug with /etc/dfs/sharetab, this file should be auto generated, but it doesn't, manually create the file with 644 perms and enter the entries manually.

Example -       /app/PNYCOINF01/opera/BO        -       nfs     rw=pdcsmb01:emasmb01

GDM Help - Gnome/gnome display manager
gdmsetup
Conf File - /etc/X11/gdm/gdm.conf
Increase Display's per host & Maximum sessions allowed for more users to use VNC/vnc / Exceed
Also Copy 4 files from /usr/dt/config/ to /etc/dt/config/ - Xaccess Xconfig Xservers Xsetup

AutoMount Issues on RH3U5
cannot cd in to autuomounted dir's
cd /apps/bin fails
ON NFS server export the share to all - no authentication
# share
-               /export24   rw=eqservers   ""
-               /export25   rw=eqservers   ""
-               /export21   ro   ""

Note - /export21 has no authentication

NFS sharing issue on Linux
=> Needs /etc/hosts.allow to have the following entries -
        portmap  : ALL : allow
        lockd  : ALL : allow
        mountd  : ALL : allow
        statd  : ALL : allow
        rquotad  : ALL : allow

NFS Client Mount options on Linux -
mount -t nfs -o rw,bg,hard,nointr,rsize=32768,wsize=32768,tcp,actimeo=0,vers=3,timeo=600 pnl31d-0002a.fir.fbc.com:/db_dumps/oracle/DNYPCR50 /mnt
Timesten Commands -
create user tt_admin identified by '33_adm1n';
grant connect,select,write,ddl,admin to tt_admin;
call ttUserPrivileges;
ttDestory CTTDS_GTWNY1
ttRestore -fname PTTDS_GTWNY1_Bkp_06132008.190548 -dir /ttdumps/CTTDS_GTWNY1 CTTDS_GTWNY1

Commands to run after Board upgrade on Sun Frames -
setupplatform -p usiv+
setupplatform -p dual-domains
flashupdate -c <src> <dest>
flashupdate -c /N0/SB0 /N0/SB1  ( Powercycle the boards after flashupdate is done )
console -d <domain>
setupdomain     Diag-level: mem2

/N0/SB1/FP0 POST    Yes        12 08/03/2007 06:11 1.0   5.20.7
/N0/SB1/FP0 OBP     Yes        12 08/03/2007 06:09 1.0   5.20.7
/N0/SB1/FP0 Ver     -          -  08/03/2007 06:13 1.0   5.20.7 Build_01
/N0/SB1/FP1 POST    Yes        12 08/03/2007 06:11 1.0   5.20.7
/N0/SB1/FP1 OBP     Yes        12 08/03/2007 06:09 1.0   5.20.7

/N0/SB0/FP0 POST    Yes        12 05/23/2007 08:54 2.0   5.20.6
/N0/SB0/FP0 OBP     Yes        12 05/23/2007 08:53 2.0   5.20.6
/N0/SB0/FP0 Ver     -          -  05/23/2007 08:56 2.0   5.20.6 Build_02
/N0/SB0/FP1 POST    Yes        12 05/23/2007 08:54 2.0   5.20.6
/N0/SB0/FP1 OBP     Yes        12 05/23/2007 08:53 2.0   5.20.6
/N0/SB0/FP1 Ver     -          -  05/23/2007 08:56 2.0   5.20.6 Build_02

===============
Tealeaf:        Switch port mirroring on I/F - eth4 (fony-tlf1)
               Switch Name - DBEN1SRT01 AND DBEN1SRT02
               Tools concentrator switch - DBEN1SRT03 port46 (Prod)
               foad-tlf1 eth6 - DBEN1SRT03 port45 (UAT)

===============
BGE ifconfig hang issue -
BugID#5070230 - ip_process_ioctl does not become exclusive under some conditions

Informatica/informatica Release for Artemis -
Repository name:   darwin_prod
Repository Server: 10.3.93.117
          Port:   14020
Login:  Administrator

Upgrade M5000/4000 firmware -
XSCF> getflashimage -v -u J941592 ftp://10.3.23.1/FFXCP1071.tar.gz
XSCF> flashupdate -c update -m xcp -s 1071
reboots
XSCF> version -c xcp -v
XSCF> showdomainmode -d 0
XSCF> setdomainmode -d 0 -m secure=off

Firmware Upgrade on T Series T5440/T5240/T5220
/usr/platform/sun4v/sbin/sysfwdownload Sun_System_Firmware-7_2_10-Sparc_Enterprise_T5120+T5220.pkg
poweroff the system
sc> poweroff
sc> setkeyswitch -y normal
sc> flashupdate -s 127.0.0.1

nxge lockup during high load -  138048-05 fixes it
DR Hang on Mx000 - 137111-01 fixes it
Mx000 servers panic due to large pages in kernel Mem with Krenel rev 127127-11
137280-02 - dld patch
138042-03 - MAC patch
Workaround -    set heaplp_use_stlb=0  in /etc/system
Remove patch 127737-02 for Solaris 10 versions
==================================
/opt/net-snmp/bin/snmpwalk -c jpmc sneo-orcp0.ct.sg.chase.com:16161     [ quick SNMP hack ]
==================================
To Detach / reconnect the interfaces in Solaris
if_mpadm -r ce1 (reconnect)
if_mpadm -d ce1 (dettach)

=================================
Get Sybase DataServer Names -
ps -ef | grep RUN | grep -v grep | cut -d'/' -f9 | awk -F"_" '{OFS=""; print $2, "_", $3}' | sort -u

Get all the interfaces on Solaris 8 system -
egrep "\"ce\"|\"hme\"|\"qfe\"|\"ge\"|\"bge\"" /etc/path_to_inst | awk '{print $2, $3}' | sed 's/"//g' > /tmp/inf
Get all the interfaces on Linux system -
IFCOUNT=`lspci | grep "Ethernet controller" | wc -l`
IFCOUNT=`expr $IFCOUNT - 1`
while [ $IFCOUNT -ge 0 ]; do echo "==eth${IFCOUNT}=="; ethtool eth${IFCOUNT} | egrep "Speed:|Duplex:|Auto-negotiation:|Link detected:"; echo ""; IFCOUNT=`expr $IFCOUNT - 1`; done

=================================
Some Solaris 10/Solaris10 Help -

Get all the interfaces on Solaris 10 System -
dladm show-dev
dladm show-linkprop     [ Shows exclusively assigned interfaces ]
dladm set-linkprop -t -p zone=excl bge0 [ exclusively assign Local Zone Interface to bge0 ]
dladm reset-linkprop -t -p zone=excl bge0 [ Remove exclusive assignment ]

To Detach / reconnect the interfaces in Solaris
if_mpadm -r ce1 (reconnect)
if_mpadm -d ce1 (dettach)

projadd -U sybase -K "project.max-shm-memory=(priv,64GB,deny)" user.sybase
projmod -s -K "project.max-sem-ids=(priv,256,deny)" user.sybase
prctl -n project.max-shm-memory -i project user.sybase
prctl -i project user.oracle    [ list all values for user oracle ]
prctl -n process.max-sem-nsems -i process `pgrep -u oracle | head -1`
lsof / top - doesn't work on Solaris10 zones. lsof latest binary has -z option.
pfiles - Use pfiles on a PID to list all open files, it lists all open ports as well.
for PID in `ls`; do  echo -e "${PID}:\t\c"; pfiles $PID | grep AF_INET || echo ""; done

=================================
LD Special Mount options o n cmcld21/22
mount -F vxfs -o mincache=direct,convosync=direct,noatime /mnt_point

=================================
"set md:mirrored_root_flag=1" in /etc/system for Meta DB replacs to be less than 50% quorum

=================================
SLAB/Slab/slab How-To
SLAB:   Service Level Automation Base
https://confluence.uk.jpmorgan.com/confluence/display/HGMN/Environments+Dashboard
Slab Website - http://eqadmin.ny.jpmorgan.com:40001/index.html

#########################################
#                                       #
#       CS      Credit-Suisse   CS      #
#                                       #
#########################################

HR Payroll:     http://payroll.csfb.net/        1-877-PAY-2732
HR Benefits:    http://resources.hewitt.com/credit-suisse/

Desk PC:        wpri1108452526.csfb.cs-group.com Omni Build 3.4.2 build 119
                WPRI1108603249.csfb.cs-group.com Omni 3.5.0 Build 3 (new PC)
Idesktop:       USD09202168.gbl.ad.hedani.net (169.49.219.43) Windows 7
IP:             169.49.220.198
                169.49.220.167  (new)
Login ID:       abhat3
Employee ID:    QABM
PID:            M650552

Comiskey Ether: 0:3:ba:96:6e:a8
Comiskey IP:    169.49.219.135
pdc-adm07 IP:   169.49.219.27

H Drive:        abhat3$ on nycacopia-vip1 (nnyc11p20012)
F Drive:        ROApps on cnyc19p23001a
J Drive:        RWApps on cnyc19p23003a
V Drive:        DfsRoot$ on csfb.cs-group.com
K Drive:        Unix$ on cnyc19p20003b

IP Softphone:   5-1003  Pwd - 25502     Call Server - emavpbx1.dd.csfb.net
IP Softphone:   3-0993  Pwd - 15497     Call Server - pdcpbx.corpny.csfb.com
IP Softphone Website:   http://gns.csfb.net/documentation/voice/americas/ipsoftphone/index.html

Iconnect Text Conf Server:      conference-us.credit-suisse.net
VM deployment URL:      http://vrm-am-prod-svr.csintra.net/VRM
Personal Linux VM:      usl10153273.am.hedani.net
Jay's Windows VM:       vpri11eup07017.cs-group.csfb.com
Suresh's OMNI VM:       vpri11eup05499.cs-group.csfb.com
CoreDB:         http://nycprd.app.csfb.net/CoreDB/
Unix Oncall Rota:       \\snyc11p12050.corpny.csfb.com\GSIDOCS$\MonthlySchedules

Patrol RTServer:        tcp:dnys18a-0047.corpny.csfb.com:2050
Patrol Unix Console Server:     PCCNYC1BA0P

DMZ/ASZ RTServer:       tcp:dnys18a-0046.corpny.csfb.com:2050
        Console Server: PCCNYC2BD0P

CSAM/csam/AI:   nyc.csam.com us.csamintra.net
PW Reset for CSAM:      tladm001.eu.csamintra.net
                                /auto/Tools/script/pwreset -p <new-pw> -n <username>

gl-admin1.corpny.csfb.com:      Prep(/app/release/bin/prep) tool for sudoers, become.conf
                                Source Variants.
                                /app/service_desk/bin/sd_admin.pl - Account administration
New Distmaster: pns00i-0103 (gl-distmaster1)
Equity Staging: pns06i-0101
FI Staging:     pns01i-0101
Corpny Staging: pns00i-0104

QIP Download:   pdcgsi03 - cd /app/yp/bin; ./download_qip_hosts
In DR Mode:     pdcgsi03 - cd /app/yp/bin; ./download_qip_hosts -DR

Procedure to FTP Outside -
ftp ftp.ifw.csfb.net
lgn : faosunftp
pw : DadeFa1n
user anonymous@ftpsite

Some FTP cmds -
quote help site
quote site umask
passive

============================================
GLOBAL ZONE/zone SERVERS:
FIDS:
pns31h-6001a/b/c and  pns31h-6002a/b/c
FAO:
pns45h-6001a/b/c and pns45h-6002a/b/c
EQ:
pns36h-6001a/b/c and pns36h-6002a/b/c

NIS Servers for DEV virtual zone domain:
FIDS:
pns31i-0001/pns31i-0002
FAO:
pns45i-0001/pns45i-0002
EQ:
pns36i-0001/pns36i-0002

NFS Servers for DEV virtual zone domain:
FIDS:
pns31h-0001a/pns31h-0001b
FAO:
pns45h-0001a/pns45h-0001b
EQ:
pns36h-0001a/pns36h-0001b

### Below CMD is to create Full zones on CSS 2.0.1 ###
cscreatezone -z vpns31a-0004 -b /cs/zones  -w pns15i-0117.corpny.csfb.com -i SunOS.5.10-css2.0.1.sparc.cpio.gz -p e1000g0  -s 1000 -m 1024M -t 512M -c -d
./cscreatezone -z vpns45a-5202 -b /cs/zones  -w pns15i-0117.corpny.csfb.com -i SunOS.5.10-css2.0.1.sparc.cpio.gz -p e1000g2:169.49.245.16 -o am_corp_dev.nis -s 1000 -m 4096M -t 2048M -c -d

Spare DG named cszone_sparedg_1 has to be created before creating a zone

Sysinfo Data:
pns15i-0108     /app/central_data/sysinfo

LDOM/Ldom/ldom:
# ldm add-vdsdev /dev/dsk/c0t60002AC0000000000000572F0001951Dd0s2 b7dspocdb1_os_disk_NEW@primary-vds0
ldm list
============================================

============================================
Notes on I/O Scheduler in Linux -
I/O Scheduler
Flexible, pluggable I/O scheduler
Selectable via boot parameter elevator=<X>
. noop
. deadline
. as (default in mainline kernels)
. cfq (default in SLES9)
Optimize latency versus throughput

I/O Scheduler: Noop
No reordering, just merging
Best for storage with extensive caching and scheduling of its own
Activated by boot parameter elevator=noop

I/O Scheduler: Deadline
Per-request service deadline
. caps maximum latency per request
. maintains good disk throughput
Best for disk-intensive database applications
Activated by boot parameter elevator=deadline

I/O Scheduler: Anticipatory
Similar to .deadline., but anticipates reads by putting them in front of the queue and delays a few ms after every read.
. maximizes throughput
. at the cost of increasing latency
Best for file servers and desktop workloads with single IDE/SATA disks.
Default in mainline kernels
Activated by boot parameter elevator=as

I/O Scheduler: CFQ
Complete Fair Queuing
Treat all competing processes equally by keeping a unique request queue for each and giving equal
bandwidth to each queue.
. good compromise between throughput and latency
. minimal worst case latency on all reads and writes
Suitable for a wide variety of applications
Default in SLES9
Activated by boot parameter elevator=cfq
============================================

============================================
ODM Installation for Oracle -
This applies to solaris 10 server at Patch 120011-14 or later.

1. backup existing oracle library:
mv /app/oracle/PNYEQCF1/product/10.2.0.4/lib/libodm10.so /app/oracle/PNYEQCF1/product/10.2.0.4/lib/libodm10.so.PREVRTS
2. link VRTS library:
ln -s /opt/VRTSodm/lib/sparcv9/libodm.so /app/oracle/PNYEQCF1/product/10.2.0.4/lib/libodm10.so
3. chown root /app/oracle/PNYEQCF1/product/10.2.0.4/bin/oradism
4. chmod 4755 /app/oracle/PNYEQCF1/product/10.2.0.4/bin/oradism
5. ReMount all the Data, redo & archive Filesystems for this oracle Instance with QIO option.
6. Create odm directory in /dev
mkdir odm
7. Mount odm
mount -F odm /dev/odm /dev/odm
8. Start ODM
 /etc/init.d/odm start
9. Restart the DB and monitor the alert log. You should see the following message:
Oracle instance running with ODM: Veritas 5.0.10.10 ODM Library, Version 1.1
============================================

Legacy - Proxy Server: ema-ca-http.csfb.net

============================================
Some Help on ASM -
Find ASM Disks - cat /proc/partitions | awk '{print $4}' |grep ^sd.*1 | xargs -i /etc/init.d/oracleasm querydisk /dev/{}
oracleasm scandisks -v /dev/vx/rdmp/sd*         [ Scan all ASM disks under VxDMP ]
dd if=/dev/emcpowerdr1 bs=1M count=1 | hexdump -C | more        [ will display * for duplicate blocks ]
dd if=/dev/emcpowerdr1 bs=1M count=1 | hexdump -Cv | more       [ displays everything ]
Recovering ASM disk labels :
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/app/oracle/LSNR_ASM/product/RAC/10.2.0.4/lib
/app/oracle/LSNR_ASM/product/RAC/10.2.0.4/bin/kfed read /dev/sdd1 aunum=0 blknum=0 text=/tmp/kfed.txt
fix dskname, fgname, dsknum, provstr in the kfed text file, than issue below merge cmd on the device with correct txt file.
/app/oracle/LSNR_ASM/product/RAC/10.2.0.4/bin/kfed merge /dev/sddf1 text=/tmp/kfed.txt
/etc/init.d/oracleasm force-rename <NEW ASM NAME> <Device Path>
#dd if=/dev/sddf1 of=/tmp/bad65.txt bs=1024 count=100
For minor ASM header corruption in Oracle 11G try "kfed repair" option.
============================================
OCFS Notes - /app/ocfs/sbin/debugocfs -h /dev/sdab1
/app/ocfs/sbin/ocfs_uid_gen -r  { If MAC address changes on OCFS node, reboot after this step }
Oracle RAC should add 3 entries in /etc/inittab
============================================

Some Help on WANBOOT/WANboot/Wanboot/WANBoot -

WanBoot Server: pns15i-0117
setenv network-boot-arguments host-ip=169.49.28.60,router-ip=169.49.28.1,subnet-mask=255.255.255.0,hostname=njs75d-0001a,file=http://169.49.225.12/cgi-bin/wanboot-cgi
At OK prompt paste the below. This procedure will not mirror the rootdisk.
Note: It is advisable to boot net -s before doing a complete install to identify the correct rootdisk to build.
boot net - install image=SunOS.5.8-16.0.sparc.cpio.gz disk=c3t0d0 part=default.146000 nomirror  [ Assumes 146GB rootdisk ]
boot net - install image=SunOS.5.10-css2.1.sparc.cpio.gz disk=c3t10d0 part=default.72000 nomirror [ 72G rootdisk]
Enforce 100fdx in below ex. -
boot net:speed=100,duplex=full - install image=SunOS.5.10-css2.1.sparc.cpio.gz disk=c3t10d0 part=default.72000 nomirror [ 72G rootdisk]

Boot args: Listed in file /app/wanboot/CB_install/bin/CS_Common

NOTE - Proper network interface must be aliased as "net" for wanboot to work.

boot vnet2:dhcp –s      [To boot from net for an LDOM]

installboot /usr/platform/`uname -i`/lib/fs/ufs/bootblk /dev/rdsk/c0t0d0s0
installboot -F zfs /usr/platform/`uname -i`/lib/fs/zfs/bootblk /dev/rdsk/c0d0s0 [For ZFS]

ISSUE - Warning: Fcode sequence resulted in a net stack depth change of 1       [ Fails to load FCODE ]
Problem is with the boot_archive which didn't get created correctly while shutting down the server.
1. Boot your computer from the network/CD/DVD using a Solaris 10 05/08 (or later).
2. Mount the root filesystem slice to /<root-fs-mount-point>
3. rm -f /<root-fs-mount-point>/platform/`uname -m`/boot_archive
4. /<root-fs-mount-point>/sbin/bootadm -a update_all  OR
4. /sbin/bootadm update-archive -R /<root-fs-mount>

Since in most cases root disks are mirrored on SVM use following procedure -
1. mount -F ufs -o ro /dev/dsk/<root-drive> /mnt
2. cp /mnt/kernel/drv/md.conf /kernel/drv/md.conf
3. umount /mnt
4. update_drv -f md
5. metainit -r
6. metastat -c
7. metasync -r
8. metastat -c
9. mount -F ufs -o ro /dev/dsk/<root-drive> /mnt
10. /sbin/bootadm update-archive -R /mnt
11. umount /mnt
12. sync; sync; sync; <restart-system>

============================================

Useful remote DD/dd command -
dd if=list.rich ibs=1024k | ssh distmaster "( cat - |  dd of=testfile obs=1024k )"
============================================

Some Info on ESX / VMware / VMWARE -
ESX Install Server - https://pne15i-0023a.corpny.csfb.com/
VMware Prod Server - spri11p10198
VMware DEV Server - spri11p10197
VMware New Server - spri11p10199
VMware ngCHP Servers - spri11p10014 / spri11p10003
DART ESX Server - eAMPDCFAOP0023 / eAMHBRFAOP0023
MyAccess issue with ngCHP:      Email:  <list.it-tis-gps-sec-aut-eng-iti-sup-esc@credit-suisse.com>, sdfs support

b3pesxap1:      b3pesxap1_c
b3pesxap2:      b3pesxap2-con

vCenter Server: b1stsmgd87.rb.win.frb.org

Rescan SCSI HBA's on ESX/esx host -
esxcfg-rescan vmhba4    [ On b3pesxap1 ]
esxcfg-rescan vmhba1    [ On b3pesxap2 ]
esxcfg-vmhbadevs --all  [ Print all vmhba's on esx host ]
esxcfg-vmhbadevs --vmfs [ Map SAN volumes to VMFS volumes ]

/usr/sbin/esxupdate -a query
/usr/sbin/esxupdate --explain -d file:$PWD/$1 scan              [ Scan Only ]
/usr/sbin/esxupdate --nosigcheck -d file:$PWD/$1 -b $1 --test update    [Dry-Run]
/usr/sbin/esxupdate --nosigcheck -d file:$PWD/$1 -b $1 update   [ Update to new patch bundle and reboot ]
/usr/sbin/esxupdate --nosigcheck -d file:$PWD/$1 -b $1 -n update        [ Update to new patch bundle without rebooting. Requires manual reboot for kernel updates ]
===================================================
HP Array Utility -
/usr/sbin/hpacucli
=> help
=> ctrl slot=0 physicaldrive all show

Smart Array P410i in Slot 0

   array A

      physicaldrive 1I:1:1 (port 1I:box 1:bay 1, SAS, 72 GB, OK)
      physicaldrive 1I:1:2 (port 1I:box 1:bay 2, SAS, 72 GB, OK)
=> ctrl slot=0 logicaldrive all show

Smart Array P410i in Slot 0

   array A

      logicaldrive 1 (68.3 GB, RAID 1, OK)

# hpacucli controller slot=0 show
# hpacucli controller slot=0 ld 1 show
# hpacucli controller slot=1 array A remove drives=1:1
# hpacucli controller slot=1 array A add drives=1:1

===================================================

===================================================
Some Help on SYMCLI/symcli/Symcli -
All Cmd's Under /usr/symcli/bin

symcg list                              [ Lists all CG's on the Symm ]
symmir -cg BCV_PNYSENT2_archdg query    [ Lists the clone state of BCV CG ]
symrdf -cg PNYCSAR1_S query             [ Lists the SRDF state of SRDF CG ]

===================================================
Some Useful Windows/windows Commands -
ipconfig /all
ipconfig /flushdns
conf                    [ Windows netmeeting ]
bootrec /fixmbr         [ Fix bad MBR from Windows 8 cmdline. ]

===================================================
FTPS/ftps/FTPs

Copy two FTPS Client packages from pns15i-0108 /app/home/xftp to /tmp folder on destination server.

CS_VR4_PKG_CODEP_GLOBAL.pkg
CS_VR4_PKG_CONFP_GLOBAL.pkg

Packages found also under vpnl15a-0679:/app/ss_app_Packages/FTPS_pkg

FTPS server setup steps

1. Extract /var/tmp/FTPS.tar.gz (on vsgs00i-0420) under /app.
        - Two directories lftp (FTPS client) and proftpd (FTPS server) will be found.

2. Ensure "ftps" group (ftps::80:) exists in /etc/group. All user accounts intending to use FTPS should be a member of this group.

3. Copy server certificate (example:vsgs00i-0420.p12 & vsgs00i-0420.p12.pwd) under /opt/pki/etc.
        - S-PID certificates are also to be deployed under /opt/pki/etc.

4. Update /app/proftpd/etc/proftpd.conf to ensure the location of the server certificate is recorded correctly.
        # grep vsgs00 proftpd.conf
        TLSRSACertificateFile /opt/pki/etc/vsgs00i-0420.p12
        TLSRSACertificateKeyFile /opt/pki/etc/vsgs00i-0420.p12.pwd

5. Execute /app/proftpd/bin/ftpsstart.sh start to start the FTPS server process.
        # ps -ef | grep proft
            ftps 16334 13002   0   Apr 01 ?           3:55 /cs/proftpd/sbin/proftpd -c /cs/proftpd/etc/proftpd.conf


FTPS client setup steps

1. Ensure that the participating user account and the SPID that owns the certificate are setup on the server and are members of the ftps group.

2. Login as the user account and execute /app/lftp/bin/lftp_setup.sh.

        - This will create the following files/directories.
                -rw-------   1 hsingh10 globus        38 Jul 24 15:16 .history
                drwxr-xr-x   2 hsingh10 globus        96 May 13 18:29 .lftp
                -rw-r--r--   1 hsingh10 globus       139 May 12 16:05 .lftprc
                -rw-r--r--   1 hsingh10 globus        37 May 13 18:28 .netrc

3. Edit the .lftprc to point to the SPID certificate that you intend to use.

        - In the below example the .lftprc of hsingh10 points to the SPID certificate of user account S204111
        # cat .lftprc
        ## lftp user configuration build by lftp_setup.sh
        set ssl:cert-file /opt/pki/etc/S204111.p12
        set ssl:key-file /opt/pki/etc/S204111.p12.pwd

4. Ensure the below are added to the .profile of the participating user (customize according to the preferred shell of the user account)

        LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/app/lftp/ssl
        PATH=$PATH:/app/lftp/bin:.
        export LD_LIBRARY_PATH PATH

5. Execute the command below to initiate connection.

        $ lftp -p 2121 dsgs99a-6001

6. Test the connection. A message like the one below indicates that the handshake with the other node failed. Check whether the SPID certs are installed under /opt/pki/etc on the target server for the participating SPID accounts. A successful connection would normally take you to the lftp prompt again and you could then proceed with the file transfers.

        lftp s204111@dsgs99a-6001:> cd /tmp
        cd `/tmp' [Delaying before reconnect: 30]

7. lftp has some good help options.

lftp s204111@dsgs99a-6001:> help

Process instance id = PKII_Cert_Ordering_Test_1297268574287
Process instance id = PKII_Cert_Ordering_Prod_1298664657631 (vpns30i-0208 PROD)
Process instance id = PKII_Cert_Ordering_Prod_1298664796129 (hbs75a-4404a)
Process instance id = PKII_Cert_Ordering_Prod_1298664894391 (hbs75a-4404b)
Process instance id = PKII_Cert_Ordering_Prod_1303509741755 (vpns15i-0208 PROD)

===================================================

Windows Macro for CoreDB on iDesktop -
runas /noprofile /netonly /user:csfb\abhat3 "c:\program files\internet explorer\iexplore.exe http://coredb.app.csfb.net/coredb/"
runas /netonly /user:csfb\abhat3 cmd
C:\Program Files\Internet Explorer\iexplore.exe

=======================================
METASETS/metasets -
metaset -s <setname> -P         [ allows a disk set to be purged without the need to perform a complete rebuild of the SVM environment ]
metaimport -r <setname>         [ scanning the disks and pulling metaset back from the configuration data. ]
metaset -s <setname> -C take    [ Shared metasets will not auto-import after boot ]
metaset -s <setname> -A enable  [ Set auto-import on non-shared metaset ]

=======================================
Assigning a CPU pools -

pooladm -e      [ Activate Pool Facility ]
svcadm enable svc:/system/pools:default
pooladm -s      [ Save current config to /etc/pooladm.conf]
pooladm         [ Shows current pool config ]
poolcfg -c 'create pset oracle_pset (uint pset.min=4; uint pset.max=4)'     [ Create Processor Set ]
poolcfg -c 'create pool oracle_pool'
poolcfg -c 'associate pool oracle_pool (pset oracle_pset)'
dispadmin -d FSS
poolcfg -c 'modify pool oracle_pool (string pool.scheduler="FSS")'
pooladm -c
zonecfg -z zone1
zonecfg:zone1> set pool=oracle_pool
zonecfg:zone1> exit
poolbind -p oracle_pool -i zoneid
user.ptribble:2001:Peter:::project.pool=peter_pool      [ /etc/project file to assign pool ]
newtask -v -p <proj-name>               [ To start all procs under named project ]

CPU assignment on Linux/linux -
taskset -c 0 <command>  will execute the <command> on CPU#0. You can specify multiple CPU's with comma or use range with -
Existing process can also be bound to a particular CPU -
taskset -p  -c 0 <pid>          Will bind pid to CPU 0.

=======================================

=======================================
FUSION I/O  Fusion I/O FIO/fio -
Assuming the ioDimm devices on the ioDuo are fct0 and fct1:

     a) Be sure to back up any critical data from fct0 and fct1 (fioa, fiob)

     b) Detach the drives:
          fio-detach /dev/fct0
          fio-detach /dev/fct1

     c) Format the drives:
          fio-format -s520G /dev/fct0
          fio-format -s520G /dev/fct1

     d) Re-Attach the drives so they can be used with Veritas:
          fio-attach /dev/fct0
          fio-attach /dev/fct1

2. Configure RAID0 via VxVM
vxddladm -f addforeign path=/dev/fioa
vxdctl -f enable
vxdisk -f scandisks
vxdisk scandisks device=fioa
vxdisk init fioavxdg init vx_group cds=off fioa=fioa
=======================================
=======================================
Some help on HOSTCLI/Hostcli/hostcli -

-       Show all files under the tracker for a particular host
#/app/bin/hostcli --get cvsfiles host=wnl06a-7001a

-       Show log for a file
# /app/bin/hostcli --get cvslog file=/var/spool/cron/tabs/root host=wnl06a-7001a

-       Retrieve file to STDOUT
# /app/bin/hostcli --get file=/var/spool/cron/tabs/root host=wnl06a-7001a

-       Retrieve OLD revision to STDOUT
# /app/bin/hostcli --get file=/var/spool/cron/tabs/root host=wnl06a-7001a rev=1.1

=======================================
=======================================
PATROL/Patrol/patrol -

bash-2.03$ . ./patrolrc.sh
bash-2.03$ dump_hist -param CPUCpuUtil -s 08100000
bash-2.03$ dump_hist -param CPUCpuUtil -s 08100000 ( Dump data starting from - mmddhhmm)

param details For CPU -

CPUCpuUtil
CPUIdleTime
CPULoad
CPURunQSize
CPUSysTime
CPUUserTime
CPUWio

MEMUsedMem
MEMUsedMemPerc
MEMPageScanned
MEMFreeMem

=======================================
HPAM/hpam -
You can request access to HPAM via the following link:
http://my.csintra.net/NASApp/MyForm/MyFormServlet?command=authent&action=formView&FormId=37685&langLabel=en
The request form will instruct the Zurich team to create your CH Citrix and HPAM access:

Instructions for the Form:
1.      Enter your user details
2.      Check the following options:
Group Access Rights Required
"       CITRIX Program Neighborhood (non-CH users only)
"       HP Asset Manager CITRIX Client (non-CH users only)
"       EURBELUNI Account (non-FiT users only)

Access Request Reason
"              Access HPAM to perform Inventory Reporting (Read Only Access)

Access Request Profile
"       AM RDO Data Center

HPAM Keyboard mapping issue: Press LEFT ALT + SHIFT   to have correct US keys mapped.
=======================================

=======================================
Some ngCHP cmds -
crtls
crtplg
/var/tmp/bmiiend/S99bmiend
/opt/pki/dcmt/bin/create.sh

=======================================
MPT SCSI BUG
=======================================
On Solaris 10 systems with revisions B2 or B3 of Serial Attached SCSI controllers LSI SAS1064E or LSI SAS1068E installed, the mpt(7D) driver may trigger a panic when a PCI memory read crosses or ends on a 4-gigabyte boundary. The host may panic with the following string:

Fatal error has occurred in: PCIe fabric.(0x0)(0x41)

This issue only occurs on systems with revision B2 or B3 of Serial Attached SCSI controllers LSI SAS1064E or LSI SAS1068E. To determine if a system has these revision of the controllers installed, execute the following command:

    $ prtpicl -vc scsi-2 | egrep 'vendor|device-id|revision'
    :vendor-id     0x1000
    :device-id     0x58
    :revision-id   0x4
    :subsystem-vendor-id   0x1000

If the vendor-id is 0x1000 and device-id is 0x56 or 0x58 and revision-id is 0x4 or 0x8 then the system is vulnerable to the issue.

Fix / Workaround
Download 143128-05_files.tar from the GPS UNIX Engineering's website. Un-tar the archive in the root (/) file system. Reboot the host.
=======================================

#################################################
#                                               #
#       FRBNY   Federal Reserve Bank    FRBNY   #
#                                               #
#################################################

FRBNY PC:       B1N5CG7213X5C.rb.win.frb.org has address 10.102.156.118

Attn: DONALD JAMES / Sean Muldoon, Market's Group
FEDERAL RESERVE BANK OF NY - EROC
100 ORCHARD STREET
EAST RUTHERFORD NJ 07073
UNITED STATES

ISNY Security Scan/scan tool:   IBM Appscan 8.5
13th Floor reception Desk:      720-7934

Access to Shared Drive S:       MKTData on \\rb.win.frb.org\B1\Shared   B1G-MKTSNO_GRP
H: Drive -      b1axb14 on \\rb.win.frb.org\B1\Home\MKT\A-C

GTM/LTM Remedy queue:   DCNO-NAS

GTX JUMP Servers:
P1PWVDRSZI001.rb.win.frb.org     ( connection broker)
P1PWVDRSZI012.rb.win.frb.org
P1PWVDRSZI013.rb.win.frb.org
P3PWVDRSZI012.rb.win.frb.org
P3PWVDRSZI013.rb.win.frb.org
=======================================
Some Help on Centrify
=======================================
adjoin rb.win.frb.org -z stagingZone -n b3dgz20.mg.ny.frb.org -a b3dgz20.mg.ny.frb.org -c rb.win.frb.org u b1mkt_centrify -p <passwd>

adleave -u b1mkt_centrify -p f3d@dmin -r
adinfo
adflush
adclient consuming 100% CPU - modify /etc/centrify/centrifydc.conf as shown below
#logger.memory.enable.buffer: true              <-- Comment this line
adclient.iterate.private.groups:true            <-- Add this line

(One needs to have privilidged access to create keytab)
adkeytab -n $myAcct \
-c "rb.win.frb.org/NY/HO/Centrify/Markets/Service Accounts/Database" \
-K $myKeytab \
-d rb.win.frb.org \
-U ${myAcct}/${myHost}.mg.ny.frb.org@RB.WIN.FRB.ORG \
-P ${myAcct}/${myHost} \
-P ${myAcct}/${myHost}.mg.ny.frb.org@RB.WIN.FRB.ORG \
-u $myUser -V

setspn -q HTTP/b7qgtxap2.mg.ny.frb.org  [Shouldn't see Centrify in O/P]
setspn -q FTP/b7qgtxap2.mg.ny.frb.org   [Should see Centrify in O/P]
setspn /l b1gtxlqa_was_wia

klist -kte $myKeytab    <--- Keytab filename
klist purge     <---    On the Windows desktop cmdline.
kinit
ktutil read_kt <keytab-name>
ktutil list

=======================================
RedHat Satellite / RHN / satellite
=======================================
Account: anant_bhat
pwd:    petname1

Account: frbnymg
pwd:    fedadmin

proxy_host=b1web1.frb.org:8080

Configuring network Bridge/bridge -
brctl show
brctl addif mgmtnet eth1
Now you can configure ifcfg-eth1 script and include line "BRIDGE=mgmtnet"

Linux ISO/iso Boot image -
mkisofs -o RHEL63_boot.iso -b isolinux.bin -c boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -J -l -r -T -v -V "RHEL6.3 Boot ISO" isolinux
### All necessary files are under isolinux dir. ###

RHEL6 -
dracut --force --add multipath --include /etc/multipath /etc/multipath

Boot Prompt argument to be configured in isolinux.cfg file -

./install.pl --answer-file=/apps/satellite_answers.txt --skip-selinux-test --external-db --enable-tftp=no
./install.pl --upgrade --external-oracle --skip-db-population --enable-tftp=no --skip-selinux-test --answer-file=/apps/satellite_answer.txt     [Upgrade cmd to 5.6]
rhn-satellite-activate --rhn-cert=/apps/satellite/certificate

/usr/sbin/rhn-satellite help
Usage: rhn-satellite {start|stop|status|reload|restart|enable|disable}

/usr/sbin/rhn-proxy help
Usage: rhn-proxy {start|stop|status|restart|condrestart}

RHN Satellite authentication using PAM/pam --
In /etc/rhn/rhn.conf make the below entry
pam_auth_service = sshd         [ Since Centrify only allows "sshd" service ]

============================
RHN Satellite Upgrade to 5.5
============================
=> get a new certificate for Satellite version 5.5
=> Download Satellite 5.5 ISO and mount the iso image.
=> cd /media/cdrom; ./install.pl --upgrade --external-db --answer-file=<path>

============================
RHN Satellite Upgrade to 5.6
============================
./install.pl --upgrade --external-oracle --skip-db-population --enable-tftp=no --skip-selinux-test --answer-file=/apps/satellite_answer.txt     [Upgrade cmd to 5.6]

satellite-sync --list-channels --mount-point /var/rhn-sat-import
satellite-sync -c channel-label-1 -c channel-label-2 --mount-point /var/rhn-sat-import
satellite-sync -c rhel-i386-as-3 --mount-point /var/rhn-sat-import
satellite-sync  [ Will sync up all Channels from RHN that are currently available on Satellite ]
if above cmd come out with error "SYNC ERROR: unhandled exception occurred:" follows below steps to fix -
# rm -rf /apps/satellite/cache/rhn/satsync*
# satellite-sync
if satellite-sync doesn't download/create Channel metadata, then restart "taskomatic" service and run -
# satellite-sync -c "<channel-name>"
After above steps you should see metadata under /var/cache/rhn/repodata/<channel-name>/
On Client run -
# yum clean all
# yum repolist

Create GNUPG GPG/gpg keys -
gpg --gen-key   [ use default key option 1, to gain entropy type lot of garbage on your keyboard ]
gpg --list-keys
gpg --export -a "Anant Bhat" > keyfile-name     [ Must have the public key created before signing a RPM pkg. ]
In users home dir (/root for ROOT user) create .rpmmacros file
%_signature gpg
%_gpg_name CD1BDDFD     [ CD1BDDFD comes from --list-keys output ]

Upload pkgs to Satellite Channels -
rpm --import http://b3ptestvmap1/pub/RHNSAT-GPG-KEY [ Must import the key before signing RPM pkg ]
rpm --resign <RPM-PKG>          [ On b3ptestvmap1 as root ]
rhnpush -v -c centrify_rhel --server=localhost -u frbnymg -p f3d@dmin --nosig centrifydc-openssh-5.6p1-4.5.0-440-rhel3-x86_64.rpm
rhncfg-manager should be run from client that connects to Satellite.
rhncfg-manager --server-name rhsprod.mg.ny.frb.org list bigfix
rhncfg-manager --server-name rhsprod.mg.ny.frb.org list-channels
rhncfg-manager --server-name rhsprod.mg.ny.frb.org add -c bigfix -d /etc/opt/BESClient/actionsite.afxm ./actionsite.afxm        [ Upload this config file actionsite.afxm to bigfix channel ]


Bootstrap/bootstrap Script for Satellite Clients:
rhn-bootstrap --activation-keys "1-satellite_markets_rhel6" --gpg-key /var/www/html/pub/RHN-ORG-TRUSTED-SSL-CERT --allow-config-actions --allow-remote-commands
wget -O- http://b3ptestvmap1.mg.ny.frb.org/pub/bootstrap/bootstrap.sh | /bin/bash
wget -e use_proxy=yes -e https_proxy=p1proxy.ha.frb.org:8080 https://cipher-test.thomsonreuters.com/
curl --proxy p1proxy.frb.org:8080 http://spacewalk.redhat.com/yum/nightly/RHEL/6/x86_64/spacecmd-1.8.15-1.el6.noarch.rpm -o spacecmd-1.8.15-1.el6.noarch.rpm
/usr/sfw/bin/wget --user=b1axb14 --password=some_pwd --no-check-certificate https://amsdepot.dp.ny.frb.org/somefile

curl -v telnet://<hostname>:<port>

Using LYNX/lynx
export http_proxy=http://p1proxy.frb.org:8080
lynx http://url.com/download

Install osad-5.9.38-5.el6sat.noarch pkg on the clients and start osad service.
This will facilitate push from Satellite server to clients.
OSAD service uses Jabber to communicate with the satellite server. Hence jabber port 5222 needs to be opened in iptables on the Satellite server

rhn-actions-control --report
rhn-actions-control --enable

Copying Satellite CA Certificate to slave -
->      copy CA cert and CA cert RPM from /var/www/html/pub/ to slave under same dir.
->      copy all contents from /root/ssl-build/ to slave under same dir.
->      On SLAVE -- cd /root; rhn-ssl-tool --gen-server --set-hostname="commonname.fqdn" --set-country=US --set-state=NY --set-city="New York" --set-org="Federal Reserve Bank" --set-org-unit="Markets" --set-email="anant.bhat@ny.frb.org" -v
->      Install the HTTP server cert RPM on the slave.

spacewalk-hostname-rename 10.102.21.33 --ssl-country=US --ssl-state=NY --ssl-org="Federal Reserve Bank" --ssl-orgunit="Markets" --ssl-email="anant.bhat@ny.frb.org" --ssl-ca-password="OpsWare123"

Directories/links that needs to be present on Slave before failover --
/apps/satellite is a replicated mount
/apps/satellite/var a dir inside above mount
/var/lib/rhn is a link
/var/lib/cobbler is a link
/var/lib/jabberd is a link
/var/cache/rhn is a link
/var/www/html/pub is a link

Satellite server will not register any client that has incorrect date and falls outside the licensing period. Fix the Hardware clock on Client if clock is out of sync due to battery issue.

Beginning with up2date-4.2.38, the Red Hat Update Agent can be configured to seek updates from a series of RHN Servers.
serverURL=https://satellite.example.com/XMLRPC; https://your_secondary.your_domain.com/XMLRPC;
noSSLServerURL=http://satellite.example.com/XMLRPC; http://your_secondary.your_domain.com/XMLRPC;

----------- Registration to RedHat Subscription-manager (RHSM) -----------
spacewalk-backend-2.3.3-46      <--- Spacewalk-backend has to be this version or higher to migrate to RHSM
yum install virt-who subscription-manager-migration subscription-manager-migration-data
subscription-manager clean
rhn-migrate-classic-to-rhsm             <---- This step unregisters from RHN Classic and registers in to RHSM
subscription-manager attach --auto
subscription-manager repos --enable rhel-6-server-rpms –enable rhel-6-server-satellite-5.7-rpms --enable rhel-6-server-supplementary-rpms --enable rhel-6-server-rhn-tools-rpms –enable rhel-6-server-optional-rpms
subscription-manager repos --enable rhel-5-server-rpms --enable rhel-5-server-rhn-tools-rpms --enable rhel-5-server-supplementary-rpms
subscription-manager repos --list-enabled
subscription-manager list --installed
/etc/pki/product/       [Should have correct product certs in this location]

spacewalk-remove-channel -c <channel-name>      [ this removes RH base channels as well ]

Kickstart/kickstart/KickStart:
Make Boot ISO image -
mkisofs -o RHEL6_Boot.iso -b isolinux.bin -c boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -R -J -v -T rhel6_bootiso/

label ks
  menu label ^KickStart
  kernel vmlinuz
  append text ks=http://b3ptestvmap1_m.mg.ny.frb.org/ks/cfg/org/1/label/ks_rhel63 initrd=initrd.img lang=en_US.UTF-8 keymap=us devfs=nomount ramdisk_size=16438 dns=172.17.190.14,172.17.190.72

Path for Kickstart profiles on Satellite:       /apps/satellite/lib/rhn/kickstarts/upload
Path for Kickstart variables on Satellite:      /apps/satellite/lib/cobbler/config/profiles.d

In case of cobbler/Cobbler exception: check /etc/cobbler/settings & /etc/cobbler/modules.conf files.
/etc/cobbler/settings should have -
        redhat_management_type: "site"
        redhat_management_server: "rhsprod.mg.ny.frb.org"
        server: rhsprod.mg.ny.frb.org
/etc/cobbler/modules.conf should have -
        [authentication]
        module = authn_spacewalk
=======================================
RHN-Proxy / rhn-proxy / RHN-PROXY
=======================================
/usr/sbin/rhn-proxy help
Usage: rhn-proxy {start|stop|status|restart|condrestart}

yum install spacewalk-proxy-installer

# configure-proxy.sh    [ This install requires server hostname set as FQDN ]
# configure-proxy.sh --force-own-ca [ Don't actually need this option ]

# rhn-proxy-activate --version=5.6 --ca-cert=/usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT [Upgarde to 5.6]

rhn-proxy caching issue -
In file /etc/squid/squid.conf
cache_mem 500 MB                [Increased this value from 400M to 500M]
maximum_object_size 350 MB      [Increased this value from 200M to 350M]

Kickstarting using rhn-proxy throws error while downloading RPM pkg:
rhn-proxy stop
rm -rfv /var/spool/squid/*
rm -rfv /var/cache/rhn/*
rhn-proxy start

=======================================
RHEV-Manager / RHEVM / rhevm
=======================================

b3prhmap1:5432:engine:engine:f3d@dmin
b3prhmap1:5432:engine:postgres:f3d@dmin
b3prhmap2:5432:engine:engine:PGsmid1HxOUP2huwnXh12g
b3prhmap2:5432:engine:postgres:f3d@dmin

yum remove classpathx-jaf       [ 1st Remove this pkg to install RHEVM 3.0 ]
yum update
yum install rhevm
rhevm-setup

In case the Channel metadata is not found and errors out on install via yum -
yum clean all
yum repolist
Above 2 cmds should repair the Channel metadata on the client.

To configure additional users, first configure authentication domains using the 'rhevm-manage-domains' utility
rhevm-manage-domains -action=edit -domain=rb.win.frb.org -user=b1axbm03 -provider=ActiveDirectory -ldapServers=d1pdc211.rb.win.frb.org,b1pdc211.rb.win.frb.org,b3pdc201.rb.win.frb.org -interactive
engine-manage-domains edit --domain=rb.win.frb.org --user=b1rhvbind --provider=ad --ldap-servers=p1pdc213.rb.win.frb.org,b1pdc211.rb.win.frb.org

Take rhevm DB dump -
pg_dump -U postgres rhevm > /apps/rhevm-backup/rhevm-db-20120214.pg_dump
psql -U postgres -c "ALTER DATABASE rhevm RENAME TO rhevm_org;"         [ Save current DB if exists to _org ]
psql -U postgres --list         [ List all postgresql DB's on this host ]
psql -U postgres -c "CREATE DATABASE rhevm;"    [ Create a blank rhevm DB ]
psql -U postgres rhevm < /apps/rhevm-backup/rhevm-db-20120214.pg_dump           [ Populate rhevm DB with previous backup ]
Some more psql cmds -
$ psql -W postgres
postgres=# \h                 # help on SQL commands
postgres=# \?                 # help on psql commands, such as \? and \h
postgres=# \l                 # list databases
postgres=# \c database_name   # connect to a database
postgres=# \d                 # list of tables
postgres=# \d table_name      # schema of a given table
postgres=# \du                # list roles
postgres=# \e                 # edit in $EDITOR
postgres=# CREATE ROLE john LOGIN;
postgres=# CREATE ROLE john WITH LOGIN; # the same as above
postgres=# CREATE USER john;            # alternative to CREATE ROLE which adds the LOGIN attribute
postgres=# ALTER ROLE john LOGIN;
postgres=# ALTER ROLE john NOLOGIN;   # remove login
postgres=# CREATE ROLE deploy SUPERUSER LOGIN;
postgres=# ALTER ROLE deploy NOSUPERUSER CREATEDB;

Get to RHEV VM Console/console using cmdline:
Do the following on RHEV Hypervisor host where the VM is running -
[root@b7drhev1a ~]# ps -ef | grep "b7dfglap1"
From the above cmd get the VM uuid, tls-port & port info.
[root@b7drhev1a ]# vdsClient -s 0 setVmTicket "c85cba11-7417-4052-bd6f-94b1aa179df3" redhat123 600
vdsClient -s 0 setVmTicket "<VM uuid>" <temp-password> <timeout in secs>
From your PC locate the "remote-viewer" binary and run the follwing cmd's -
wget -O /tmp/rhevm.cer http://rhevm.mg.ny.frb.org/ca.crt        [Get the CA Cert and pscp to your PC under some location]
C:\Users\B1AXB14\AppData\Local\virt-viewer\bin>remote-viewer --spice-ca-file=h:\Downloads\rhevm.cer --spice-host-subject="b7drhev1a" spice://10.102.100.15?tls-port=5907&port=5906

Failed Upgrade to RHEVM 3.1
In order to restore the previous installation, perform the following steps:
1. Make sure that there are no EAP6 packages on the system:
        rpm -qa | grep ep6\.el6
If there are such packages, remove them:
        yum remove `rpm -qa | grep ep6\.el6`
2. Make sure that rhevm or its dependencies are not installed:
        rpm -qa | grep rhevm
If they are still installed, remove them:
        yum remove `rpm -qa | grep rhevm`
3. Disable JBoss EAP6 and RHEVM-3.1 channels in order to avoid package dependency issues.
4. Install rhevm-3.0 from the RHEVM-3.0 channel. For example, use the following command:
        yum install rhevm rhevm-backend rhevm-config rhevm-dbscripts rhevm-genericapi rhevm-iso-uploader rhevm-log-collector rhevm-notification-service rhevm-restapi rhevm-tools-common rhevm-userportal rhevm-webadmin-portal vdsm-bootstrap
5. Update changed packages, use the following command:
        yum update jakarta-commons-codec jakarta-commons-collections jakarta-commons-lang jakarta-commons-pool jdom log4j slf4j
6. Rename DB if it is present:
        psql -U postgres --list
If 'rhevm' DB exists, rename it:
        psql -U postgres -c "ALTER DATABASE rhevm RENAME TO rhevm_old;"
7. Run rhevm-setup using the answer file located at /tmp/answer:
        rhevm-setup --answer-file=/tmp/answer
8. Remove the DB created by the setup:
        service jbossas stop
        dropdb -U postgres rhevm
9. Drop the role created by setup:
        psql -U postgres -c "DROP ROLE engine"
10. Remove the pgpass dir created by setup:
        rm -r /etc/ovirt-engine/
11. Restore the production DB using the backup file by running the following commands:
        psql -U postgres -f /var/lib/ovirt-engine/backups/ovirt-engine_db_backup_2013_02_13_17_16_11.sql
        psql -U postgres -c "ALTER DATABASE engine RENAME TO rhevm;"
12. Restore security certificates and configs using the following command:
        tar jxvfP /var/rhevm-backup.tar.bz2
13. Start jboss service using the following command:
        service jbossas start

=======================================
SSL/ssl.conf weak cipher issue
=======================================
For Apache server using SSL, change below 2 lines in /etc/httpd/conf.d/ssl.conf file, comment out the existing lines -
SSLProtocol -ALL +SSLv3 +TLSv1
SSLCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXPORT:RC4+RSA:+HIGH

For JBOSS/jboss server append following to the TLS line in /var/lib/jbossas/server/rhevm-slimmed/deploy/jbossweb.sar/server.xml file -
compression="on" ciphers="TLS_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_3DES_EDE_CBC_SHA, TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_MD5"

Convert .pem certs to p12 format -
openssl pkcs12 -export -out private.p12 -inkey server.key -in server.crt

Convert p12 to .pem format -
openssl pkcs12 -in private.p12 -out server.crt -nodes -clcerts -nokeys
openssl pkcs12 -in private.p12 -out server.key -nodes -nocerts
openssl pkcs12 -in private.p12 -out server.pem -nodes

View the CERT:
openssl rsa -text -noout -in server.crt
openssl x509 -text -noout -in server.crt
openssl x509 -in /etc/pki/spacewalk/jabberd/server.pem -text

Check the KEY:
openssl rsa -in server.key -check

Verify CA cert with Webserver Public cert -
openssl verify -CAfile /var/www/html/pub/RHN-ORG-TRUSTED-SSL-CERT /root/ssl-build/rhsprod.mg.ny/server.crt
openssl verify -CAfile /etc/pki/ovirt-engine/ca.pem /etc/pki/ovirt-engine/certs/apache.cer
openssl verify -CAfile /etc/pki/ovirt-engine/ca.pem /etc/pki/ovirt-engine/certs/engine.cer

Verify if Public cert and Private Key certfile match -
openssl x509 -noout -modulus -in RHN-ORG-TRUSTED-SSL-CERT.FRB | openssl md5; openssl rsa -noout -modulus -in RHN-ORG-PRIVATE-SSL-KEY.FRB | openssl md5

Process followed for RHEVM 2016 -
openssl req -out /var/tmp/rhvm_20170714.csr -new -newkey rsa:2048 -nodes -keyout /var/tmp/rhvm_20170714.key -config /var/tmp/openssl.cnf
openssl req -out apache_20160922.csr -new -newkey rsa:2048 -nodes -keyout apache_20160922.key -subj "/C=us/O=frb/OU=ny/CN=44141749"
openssl req -text -noout -verify -in apache_20160922.csr
cat apache_20160922.csr <<<---- To Paste this output to FRB CERT retrieval site
view apache_20160922.cer        ----->>>> Paste the Cert content from site to this file including "BEGIN CERT" & "END CERT" lines.
openssl pkcs12 -export -out apache_20160922.p12 -inkey keys/apache_20160922.key -in certs/apache_20160922.cer -certfile frbCAcert.crt   [Pkg all cert, key & CA in to one p12 file]
keytool -import -trustcacerts -alias cacert -file /etc/pki/ovirt-engine/ca.pem -keystore /etc/pki/ovirt-engine/.truststore -storepass mypass
keytool -import -trustcacerts -alias rootca -file frbCAcert.crt -keystore engine_rootca.jks -storepass mypass           [JKS file created for FRB RootCA. Used this for LDAPS]
openssl verify -CAfile ca.pem certs/apache.cer  <--- Verification
openssl verify -CAfile ca.pem certs/engine.cer  <--- Verification
Restart ovirt-engine & httpd

keytool -genkey -dname "CN=rhvm.mg.ny.frb.org, OU=ny, O=frb, C=US" -ext san=email:donald.james@ny.frb.org -alias cacert -keyalg RSA -keystore /var/tmp/rhvm_20170714.ks -keysize 2048
keytool -certreq -alias cacert -keystore /var/tmp/rhvm_20170714.ks -ext san=email:donald.james@ny.frb.org -file /var/tmp/rhvm_20170714.csr
keytool -list -keystore /var/tmp/rhvm_20170714.ks
keytool -import -trustcacerts -alias cacert -file RHVM.cer -keystore rhvm_20170714.ks -storepass mypass
keytool -import -trustcacerts -alias frbissuingCA -file Enterprise_PKI_Infrastructure_NYCA.cer -keystore rhvm_20170714.ks -storepass mypass
keytool -import -trustcacerts -alias FRBRootCA -file Enterprise_PKI_Infrastructure_RootCA.cer -keystore rhvm_20170714.ks -storepass mypass
keytool -importkeystore -srckeystore rhvm_20170714.ks -destkeystore rhvm_20170725.p12 -srcalias cacert -srcstoretype jks -deststoretype pkcs12
keytool -list -keystore /var/tmp/rhvm_20170714.ks

V2V / v2v migration -
virt-v2v -ic "esx://b3pesxap1.mg.ny.frb.org/?no_verify=1" -p b3dtsarap2 b3dtsarap2

Sample Config in /etc/virt-v2v.conf
  <profile name="b3dtsarap2">
    <method>rhev</method>
    <storage format='qcow2' allocation='sparse'>
      b3prhmap1.mg.ny.frb.org:/export/NFS/ExptDomain
    </storage>
    <network type="bridge" name="Virtual Machine Network">
      <network type="bridge" name="devnet"/>
    </network>
    <network type="bridge" name="opsware">
      <network type="bridge" name="rhevm"/>
    </network>
  </profile>

  <profile name="b3dbtecfh1">
    <method>rhev</method>
    <storage format='qcow2' allocation='sparse'>
      b3prhmap1.mg.ny.frb.org:/export/NFS/ExptDomain
    </storage>
    <network type="bridge" name="Virtual Machine Network">
      <network type="bridge" name="devnet"/>
    </network>
    <network type="bridge" name="opsware">
      <network type="bridge" name="rhevm"/>
    </network>
    <network type="bridge" name="wombat">
      <network type="bridge" name="wombat"/>
    </network>
  </profile>

Without the profile specified in virt-v2v.conf, you may use below cmdline -
virt-v2v -ic "esx://b3pesxap2.mg.ny.frb.org/?no_verify=1" -o rhev -os b3prhmap1.mg.ny.frb.org:/export/NFS/ExptDomain --bridge devnet b3dnpqsap2

curl -X GET -v -k -u "admin@internal" -H "Accept: application/xml" "http://rhevm.mg.ny.frb.org/api/storagedomains"
curl -X GET -v -k -u "admin@internal" -H "Accept: application/xml" "http://rhevm.mg.ny.frb.org/api/storagedomains/f1091301-5909-4d0f-b4d3-1cbb155d2d53/disks;unregistered"

=======================================
Symantec CSP - SCSP/scsp
=======================================
rpm -v  -i --force --nodeps --prefix /opt/Symantec/scspagent /var/tmp/SYMCcsp7514/SYMCcsp-5.2.8.168.linux.rpm

=======================================
LDAP/ldap
=======================================
ldapsearch -LLL -H LDAP://b3pdc201.rb.win.frb.org:389 -x -D 'RB\b1axbm03' -w 'passwd' -E pr=1000/noprompt -b 'ou=users,ou=ho,ou=ny,dc=rb,dc=win,dc=frb,dc=org' 'CN=b1axb14' name adminDescription sAMAccountName memberOf
/usr/share/centrifydc/bin/ldapsearch -m -Q -LLL -H "ldap://" -b <Base_DN> '(servicePrincipalName=*/<Hostname>*)' dn serviceprincipalname

=======================================
SAN Switch Port Config
=======================================
sansw1> show flogi database | grep "20:14"
sansw1> show interface fc3/9
sansw1> config t
sansw1(config)# vsan database
sansw1(config-vsan-db)# vsan 101
sansw1(config-vsan-db)# vsan 101 interface fc3/9
sansw1(config-vsan-db)# exit
sansw1(config)# exit
sansw1> show vsan 101 membership
sansw1> config t
sansw1(config)# interface fc3/9
sansw1(config-if)# no shutdown
sansw1(config-if)# switchport mode auto
fc3/9: (error) Auto/E mode is not allowed in shared rate-mode
sansw1(config-if)# switchport description "b3prhpap1_pci0"
sansw1(config-if)# exit
sansw1(config)# exit

=======================================
SAN Zoning
=======================================
ssh b3psansw1 "conf t ; show fcalias vsan 201 ; end"    [Collect all Host WWNs on a switch]

sansw1> config t
Enter configuration commands, one per line.  End with CNTL/Z.
sansw1(config)# fcalias name b3prhpap1_pci0 vsan 101
sansw1(config-fcalias)# member pwwn 50:01:43:80:21:e3:20:14
sansw1(config-fcalias)# exit
sansw1(config)# exit
sansw1>
sansw1> config t
sansw2(config)# fcalias name b3prhpap1_pci1 vsan 102
sansw2(config-fcalias)# member pwwn 50:01:43:80:21:e3:20:16
sansw2(config-fcalias)# exit
sansw2(config)# exit
sansw2>
sansw2> device-alias database
sansw2> device-alias name b7prhsap1_pci1 pwwn 50:01:43:80:21:e3:13:8a
sansw2>show device-alias name b7prhsap1_pci1
sansw2>
sansw2> show fcalias name b3prhpap1_pci1
fcalias name b3prhpap1_pci1 vsan 102
  pwwn 50:01:43:80:21:e3:20:16
sansw2> show fcalias name b3psanar1_252
fcalias name b3psanar1_252 vsan 102
  pwwn 22:52:00:02:ac:00:08:c0
sansw2> show fcalias name b3psanar1_351
fcalias name b3psanar1_351 vsan 102
  pwwn 22:51:00:02:ac:00:08:c0
sansw2>
sansw2> config t
sansw2(config)# zone name b3prhpap1_pci1_b3psanar1_252 vsan 102
sansw2(config-zone)# member fcalias b3psanar1_252
sansw2(config-zone)# member fcalias b3prhpap1_pci1
sansw2(config-zone)# exit
sansw2(config)# zone name b3prhpap1_pci1_b3psanar1_351 vsan 102
sansw2(config-zone)# member fcalias b3psanar1_351
sansw2(config-zone)# member fcalias b3prhpap1_pci1
sansw2(config-zone)# exit
sansw2(config)# exit
sansw2> show zone name b3prhpap1_pci1_b3psanar1_252
zone name b3prhpap1_pci1_b3psanar1_252 vsan 102
  fcalias name b3psanar1_252 vsan 102
    pwwn 22:52:00:02:ac:00:08:c0

  fcalias name b3prhpap1_pci1 vsan 102
    pwwn 50:01:43:80:21:e3:20:16
sansw2> show zone name b3prhpap1_pci1_b3psanar1_351
zone name b3prhpap1_pci1_b3psanar1_351 vsan 102
  fcalias name b3psanar1_351 vsan 102
    pwwn 22:51:00:02:ac:00:08:c0

  fcalias name b3prhpap1_pci1 vsan 102
    pwwn 50:01:43:80:21:e3:20:16
sansw2>
sansw2> config t
sansw2(config)# zoneset name PROD_b3psansw2 vsan 102
sansw2(config-zoneset)# member b3prhpap1_pci1_b3psanar1_252
sansw2(config-zoneset)# member b3prhpap1_pci1_b3psanar1_351
sansw2(config-zoneset)# exit
sansw2(config)# exit
sansw2> show zoneset brief vsan 102 | grep -i b3prhp
sansw2> show zoneset brief active vsan 102 | grep -i b3prhp
sansw1>
sansw1> config t
Enter configuration commands, one per line.  End with CNTL/Z.
sansw1(config)# zoneset activate name PROD_b3psansw1 vsan 101
Zoneset activation initiated. check zone status
sansw1(config)# exit
sansw1> show zoneset brief active vsan 101 | grep b3prhp
  zone b3prhpap1_pci0_b3psanar1_251
  zone b3prhpap1_pci0_b3psanar1_352
sansw1>

sansw5> show port-monitor active
sansw5> show module
sansw5> system switchover       [Perform a module switchover for SAN switch, also clears log files]
sansw5> show logging logfile
sansw5> show logging nvram

b3psansw5(config)# show users
b3psansw5(config)# show user-account
b3psansw5(config)# username b1axb14     [Creates user]
b3psansw5(config)# username b1axb14 role network-admin  [Adds this role for user]
b3psansw6(config)# aaa authorization config-commands default local [ Activates role]

Question: How can we setup only few user id’s for zoneset commands?
The only way is to create a role that denies zoneset commands and assign the role to specific users
Here is a configuration guide that will help you. The link goes to the configuring users and Common roles chapter. http://www.cisco.com/c/en/us/td/docs/switches/datacenter/mds9000/sw/5_2/configuration/guides/sec/nxos/sec/clicfgur.html
for example:

1.      Create the new role and description
a.      command: role name zoneset-deny
b.      command: description role that denies Zoneset level commands
2.      Create rules of allowed commands for the role
a.      command: rule 1 deny config feature zoneset  << this denies running of any zoneset level commands while in config mode
b.      Command: rule 2 permit config feature * << this allows running of config level commands
c.       Command: rule 3 permit show feature * << this allows all show commands for the role
3.      Look at your newly created role
a.      command: Show role name zoneset-deny
b.      Role: zoneset-deny
                Description: role that denies Zoneset level commands
                Vsan policy: permit (default)
                -------------------------------------------------
                Rule    Type    Command-type    Feature
                -------------------------------------------------
                1       deny    config          zoneset
                2       permit  config          *
                3       permit  show            *

4.      Create a user and assign newly created role
a.      command: username test role zoneset-deny password 123
b.      change an existing users role: username test role zoneset-deny

The sample role would also allow a user to create zones but they would not be able to activate them since activation is done under the zoneset command. Another user would have to activate the zoneset.
Question: How can we save/backup the running config to switch. If at all we cannot copy to switch then how do we copy/backup running config?
The best way is to create a scheduled job that saves the running-config to a remote location daily.
For example: create a task that saves running to startup and then takes the startup-config and saves it to a remote location twice a day
config
username admin keypair generate rsa 1024
show username admin keypair
username admin keypair export bootflash:admin_keypair_rsa rsa
dir bootflash:
        admin_keypair_rsa
        admin_keypair_rsa.pub   <-- Copy this key to remote servers ~/.ssh/authorized_keys
feature scheduler
scheduler job name backup_config
copy running-config startup-config
copy startup-config scp://b1axb14@10.54.14.27:44/opt/home/b1axb14/$(SWITCHNAME)-$(TIMESTAMP).txt
scheduler schedule name daily_12am
   time daily 00:00
job name backup_config
scheduler schedule name daily_12pm
    time daily 12:00
    job name backup_config
end

===================================
SAN / 3PAR cmds
===================================
showrctransport -rcip
showrcopy targets
showrcopy links
admitrcopylink b7psanar3 2:3:1:10.56.10.23
admitrcopylink b7psanar3 3:3:1:10.56.10.24
showport -rcip
checkhealth -svc -detail
showalert
servicehost list

showcpg
showvvcpg       [Shows VVs with CPGs they are part of]
showvvcpg P.*   [CPG name or pattern - useful to see AO distribution]
showspace -cpg <cpgname>
showvlun
showvv -showcols Id,Name,Prov,VSize_MB,VV_WWN -host b7drhev2a
showvv -showcols Id,Name,Prov,CopyOf,Rd,VSize_MB,VV_WWN T.RHEV_B3DEV2_GTX_ROSV
createvv -tpvv -usr_al 100 -pol zero_detect $CPG $VVNAME $SIZE
createvvset <vvsetname>
createvvset -add <vvsetname> <vvname1>
createvlun <vvname> auto <hostname>|set:<hostsetname>
showrcopy links
showrcopy groups
showrcopy targets
setrcopytarget tput 300mb b7psanar3     [Sets rcopy link to throttle at 300mb]
setrcopytarget tput 0 b7psanar3         [This will disable any throttling]
createsv -ro -exp 7d T.RHEV_B3DEV2_GTX_ROSV T.RHEV_B3DEV2_GTX
promotesv T.RHEV_B3DEV2_GTX_ROSV        [SV is promoted to its base VV by default]
promotesv -online T.RHEV_B3DEV2_GTX_RWSV        [ online option reqd only for RW snapshots ]
Safe Bet is to unexport the base VV and avoid online promotion of RW Snap.
createaocfg
startao -btsecs -43200 -etsecs -14400 -min_iops 80 -mode Performance -maxrunh 4 -compact auto P.AO_RAID5_DBLNX
createflashcache 512g
showflashcache
showflashcache –vv
setflashcache enable sys:all
removeflashcache
Statcache
Statcache –v
Statcache –v  -metadata

SHARITY/sharity License 03TWN5T1K0-725HM-TGHBS3G8SP

/usr/share/centrifydc/bin/sftp -i /apps/informatica/.ssh/FRBNYMG_Bloomberg -P 30206 -b ~infadmin/.sftp_cmd dl781623@dlsftp.bloomberg.com

Certificate Commands -
To LIST:
gsk7cmd -cert -list -db key.p12 -pw WebAS
gsk7cmd -cert -list -db key.kdb -pw k0rnfl@k

WhiteList IP's:
4.79.228.100    NY
199.169.200.4   EROC
199.169.204.4   Dallas

Some Help on MQM
mqm/MQM: Starting mqm queue manager - strmqm <Queue-name>
runmqsc <QMGR-name>
        dis chstatus(*)
        dis qlocal(*) curdepth

strmqtrc -m <QMgrName> -t detail -t all -l 200  [Start MQ Trace]
endmqtrc -a
runmqras -qmlist qmgr1,qmgr2 -section defs -pmrno 13808,L6Q,000 [Collects system info and mq logs to upload to IBM PMR no.]

Recover VIM/vi/vim files after abrupt loss of session - "vim -r .<filename>.swp"
====================================================
TREP/Trep/trep
====================================================
/opt/thomsonreuters/ads/demo/rmdstestclient -S BPIPE -ef /apps/capture/bpipe_buGV912828XM7.CBBT -h localhost -p 14222 -ct rssl -o 5 -u radmin -l stdout -rf 8 -of /apps/capture/bpipe_buGV912828XM7.CBBT.capture_file.xml -decodeFormat 3    [ Capturing the data Published by ADS using RMDS Client tool. Captured Data is stored in XML format.]

/opt/thomsonreuters/adh/demo/sink_driven_src -S BPIPE -K -N 15222 -Q /apps/capture/bpipe_buGV912828XM7.CBBT.capture_file.xml -l 140 -c          [ Replay this bussiness modified XML Data on another port ]

====================================================
NMCLI / nmcli
====================================================
nmcli general hostname <hostname>   [get or set hostname, also updates /etc/hostname file.]
“/bin/hostname” cmd still works, but it doesn’t update /etc/hostname, hence not persistent.
nmcli con add ifname eth0 type ethernet ip4 192.168.100.11/24 gw4 192.168.100.1         [Adds config for eth0]
nmcli con mod eth0 ip4 192.168.100.10/24     [Modifies eth0]
nmcli con mod eth0 connection.autoconnect "true“  [Sets Autoboot]
nmcli con add ifname eth1 type ethernet ip4 192.168.200.11/24 ipv4.routes “10.54.17.0/24 192.168.200.1 1”    [Configures eth1]
nmcli con mod eth1 +ipv4.routes “10.56.17.0/24 192.168.200.1 1”
nmcli con mod eth1 ipv4.never-default true   [Eth1 set not be used for default gateway]
nmcli con mod eth0 ipv4.dns “172.17.190.14 172.30.124.95“
nmcli con mod eth0 +ipv4.dns “172.30.132.153”
nmcli con mod eth0 ipv4.dns-search "mg.ny.frb.org rb.win.frb.org fras.frb.org"
nmcli con down eth1; nmcli con up eth1  OR  ifdown/ifup eth1    [ Both works]
nmcli networking off/on   OR   systemctl restart network           [Restarts network service]

Bonding using NMCLI -
nmcli con add type bond con-name bond0 ifname bond0 mode balance-alb;
nmcli con mod bond0 ipv4.addresses 192.168.40.1;
nmcli con mod bond0 ipv6.method ignore;
nmcli con mod bond0 ipv4.method manual;
nmcli con add type bond-slave ifname ens4f0 master bond0;
nmcli con add type bond-slave ifname ens4f1 master bond0;
nmcli con mod bond0 +bond.options mii=100
nmcli con mod bond0 +ipv4.routes 192.168.40.0/24
nmcli con up bond0;

nmcli con add type bond ifname mybond0
nmcli con add type bond ifname mybond0 bond.options "mode=balance-rr,miimon=100"
nmcli con add type ethernet ifname ens3 master mybond0
nmcli con add type ethernet ifname ens7 master mybond0
nmcli con up bond-slave-ens7
nmcli con up bond-slave-ens3
nmcli dev mod bond0 +bond.options "active_slave=ens7"
nmcli dev mod bond0 +bond.options "primary=ens3"

mode=0 balance-rr (Balance Round Robin)
mode=1 active-backup (Active backup)
mode=2 balace-xor (Balance XOR)
mode=3 broadcast (Broadcast)
mode=4 802.3ad (802.3ad Link Aggregation)
mode=5 balance-tlb (Balance TLB)
mode=6 balance-alb (Balance ALB)

====================================================
IPROUTE2/iproute2 (Advanced routing)
====================================================

Basically, we create some rules and tables for routing lookups. We will need some unique table IDs. I am going to use 224 and 225.
They should not have been used before. You can check like this:

ip rule list

Look at the first column, the output should not have 224 or 225. Otherwise, use some other number.

For eth0, create the following two files.

vi /etc/sysconfig/network-scripts/rule-eth0

from 201.19.23.128/32 table 224
to 201.19.23.128 table 224
vi /etc/sysconfig/network-scripts/route-eth0

201.19.23.0/24 dev eth0 table 224
default via 201.19.23.1 dev eth0 table 224

For bond1, create following two files.

vi /etc/sysconfig/network-scripts/rule-bond1

from 10.214.28.10/32 table 225
to 10.214.28.10 table 225
vi /etc/sysconfig/network-scripts/route-bond1

10.214.28.0/24 dev bond1 table 225
default via 10.214.28.1 dev bond1 table 225

Now you can restart the network to make these new configs effective. But do it at some planned time because this will interrupt your host's access. You may also use 'ip' commands for a runtime execution.

====================================================
IPFilter/ipfilter Fastroute (Advanced routing)
====================================================
svcs network/ipfilter
svcadm restart network/ipfilter
ipf -E  [Enable IPfilter]
ipf -D  [Disable]
ipf -f /etc/ipf/ipf.conf        read rules from conf file
ipfstat -g -o -h -i     [Show stats on packets that hit the rules]

pass out on ixgbe1 all head o_ftr
pass out on ixgbe11 all head o_ftr
pass out on ixgbe1 all head o_caps
pass out on ixgbe11 all head o_caps

pass out quick on ixgbe1 to ixgbe3:10.54.8.129 proto tcp/udp from 10.54.8.151/26 to any group o_ftr
pass out quick on ixgbe1 to ixgbe3:10.54.8.129 proto icmp from 10.54.8.151/26 to any group o_ftr
pass out quick on ixgbe11 to ixgbe9:10.54.8.129 proto tcp/udp from 10.54.8.151/26 to any group o_ftr
pass out quick on ixgbe11 to ixgbe9:10.54.8.129 proto icmp from 10.54.8.151/26 to any group o_ftr
pass out quick on ixgbe1 to ixgbe2:10.54.9.129 proto tcp/udp from 10.54.9.144/26 to any group o_caps
pass out quick on ixgbe1 to ixgbe2:10.54.9.129 proto icmp from 10.54.9.144/26 to any group o_caps
pass out quick on ixgbe11 to ixgbe8:10.54.9.129 proto tcp/udp from 10.54.9.144/26 to any group o_caps
pass out quick on ixgbe11 to ixgbe8:10.54.9.129 proto icmp from 10.54.9.144/26 to any group o_caps

To make ipfilter work with IPMP, specify IPMP groupname in above rules instead of raw interface names and set this NDD parameter. Restart IPFILTER after this.
ndd -set /dev/ip ipmp_hook_emulation 1

Performance Issue with IPFilter -
        => Disable NIC hardware checksum: In /etc/system - set ip:dohwcksum=0
        => Also disable LSO with ndd: ndd -set /dev/ip ip_lso_outbound 0

OPSWARE response files - /var/opt/opsware/install_opsware/resp/resp_globals

=====================
LDOM / ldom Help
=====================
ldm list
ldm list -o disk
ldm list -o disk b3dftrap4
ldm list -o network <optional-ldom-name>
ldm list -o console / memory <optional-ldom-name>
ldm list-devices -a mem / core / cpu
ldm list-services
ldm list-bindings

ldm add-vcpu 8 ldom1
ldm add-memory 8g ldom1
ldm add-vsw net-dev=ixgbe0 inter-vnet-link=off linkprop=phys-state vsw0 primary
ldm add-vsw net-dev=ixgbe1 vsw1 primary
ldm add-vnet linkprop=phys-state vnet0 vsw0 ldom1
ldm add-vnet vnet1 vsw1 ldom1
ldm add-vdsdev /dev/dsk/c0t50002AC914A108C0d0s2 ldom1_vol1@primary-vds0
ldm add-vdisk vdisk1 ldom1_vol1@primary-vds0 ldom1

zpool list
zpool status -v
zfs mount

=====================
Linux / LINUX Auditing / Audit
=====================
aureport --tty -i -ts 01/30/2018 09:00:00 -te 01/31/2018 10:00:00
ausearch -m TTY -i -ua b1axb14 -ts date time -te date time

=====================
Linux CGROUP / cgroup
=====================
config files - /etc/cgconfig.conf, /etc/cgrules.conf
Services - cgconfig, cgred
/etc/cgconfig.conf -
mount {
        cpuset  = /cgroup/cpuset;
        cpu     = /cgroup/cpu;
        cpuacct = /cgroup/cpuacct;
        memory  = /cgroup/memory;
        devices = /cgroup/devices;
        freezer = /cgroup/freezer;
        net_cls = /cgroup/net_cls;
        blkio   = /cgroup/blkio;
}

group spotadm {
        cpu {
                cpu.shares="250";
        }
        cpuset {
                cpuset.cpus="4-35";
        }
        memory {
                memory.soft_limit_in_bytes="64G";
                memory.limit_in_bytes="64G";
        }
}

group cvmadm {
        cpu {
                cpu.shares="400";
        }
        cpuset {
                cpuset.cpus="4-35";
        }
        memory {
                memory.soft_limit_in_bytes="24G";
                memory.limit_in_bytes="24G";
        }
}

/etc/cgrules.conf
spotadm         cpu,cpuset,memory       spotadm/
cvmadm          cpu,cpuset,memory       cvmadm/

CGROUP_LOGLEVEL=DEBUG cgconfigparser -l /etc/cgconfig.conf <--- Debug mode
