
ubuntu@sandbox-node2:~$ sudo kubectl get pvc -n awx
NAME                            STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
awx-projects-claim              Pending                                                                        local-path     <unset>                 2d2h
postgres-15-awx-postgres-15-0   Bound     pvc-4d925fab-2fb3-4e3f-b199-196f4374881d   8Gi        RWO            local-path     <unset>                 2d2h

ubuntu@sandbox-node2:~$ sudo kubectl get storageclass
NAME                   PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE
local-path (default)   rancher.io/local-path   Delete          WaitForFirstConsumer   false                  2d19h
ubuntu@sandbox-node2:~$

ubuntu@sandbox-node2:~$ sudo kubectl patch storageclass local-path -p '{"volumeBindingMode":"Immediate"}'
The StorageClass "local-path" is invalid: volumeBindingMode: Invalid value: "Immediate": field is immutable

ubuntu@sandbox-node2:~$ sudo kubectl get storageclass local-path -o yaml | grep volumeBindingMode
volumeBindingMode: WaitForFirstConsumer
ubuntu@sandbox-node2:~$

cat <<EOF | kubectl apply -f -
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: local-path-immediate
provisioner: rancher.io/local-path
reclaimPolicy: Delete
volumeBindingMode: Immediate
EOF

ubuntu@sandbox-node2:~$ sudo kubectl get pvc -n awx
NAME                            STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS           VOLUMEATTRIBUTESCLASS   AGE
awx-projects-claim              Pending                                                                        local-path-immediate   <unset>                 5m45s
postgres-15-awx-postgres-15-0   Bound     pvc-4d925fab-2fb3-4e3f-b199-196f4374881d   8Gi        RWO            local-path             <unset>                 2d2h
ubuntu@sandbox-node2:~$ sudo kubectl get pods -n awx
NAME                                               READY   STATUS    RESTARTS   AGE
awx-operator-controller-manager-58b7c97f4b-mncsk   2/2     Running   0          64s
awx-postgres-15-0                                  1/1     Running   0          62s
awx-task-55f5964cb4-f8sqh                          0/4     Pending   0          63s
awx-task-6b9698bbdd-gtdsx                          0/4     Pending   0          63s
awx-web-585dd589c5-htl9d                           0/3     Pending   0          63s
awx-web-6cc598b7-ll77h                             0/3     Pending   0          63s
ubuntu@sandbox-node2:~$
